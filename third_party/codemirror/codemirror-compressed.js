var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(q,J,B){q instanceof String&&(q=String(q));for(var O=q.length,u=0;u<O;u++){var K=q[u];if(J.call(B,K,u,q))return{i:u,v:K}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(q,J,B){if(q==Array.prototype||q==Object.prototype)return q;q[J]=B.value;return q};$jscomp.getGlobal=function(q){q=["object"==typeof globalThis&&globalThis,q,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var J=0;J<q.length;++J){var B=q[J];if(B&&B.Math==Math)return B}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(q,J){var B=$jscomp.propertyToPolyfillSymbol[J];if(null==B)return q[J];B=q[B];return void 0!==B?B:q[J]};
$jscomp.polyfill=function(q,J,B,O){J&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(q,J,B,O):$jscomp.polyfillUnisolated(q,J,B,O))};$jscomp.polyfillUnisolated=function(q,J,B,O){B=$jscomp.global;q=q.split(".");for(O=0;O<q.length-1;O++){var u=q[O];if(!(u in B))return;B=B[u]}q=q[q.length-1];O=B[q];J=J(O);J!=O&&null!=J&&$jscomp.defineProperty(B,q,{configurable:!0,writable:!0,value:J})};
$jscomp.polyfillIsolated=function(q,J,B,O){var u=q.split(".");q=1===u.length;O=u[0];O=!q&&O in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var K=0;K<u.length-1;K++){var F=u[K];if(!(F in O))return;O=O[F]}u=u[u.length-1];B=$jscomp.IS_SYMBOL_NATIVE&&"es6"===B?O[u]:null;J=J(B);null!=J&&(q?$jscomp.defineProperty($jscomp.polyfills,u,{configurable:!0,writable:!0,value:J}):J!==B&&($jscomp.propertyToPolyfillSymbol[u]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(u):$jscomp.POLYFILL_PREFIX+u,u=
$jscomp.propertyToPolyfillSymbol[u],$jscomp.defineProperty(O,u,{configurable:!0,writable:!0,value:J})))};$jscomp.polyfill("Array.prototype.find",function(q){return q?q:function(J,B){return $jscomp.findInternal(this,J,B).v}},"es6","es3");
(function(q){if("object"==typeof exports&&"object"==typeof module)module.exports=q();else{if("function"==typeof define&&define.amd)return define([],q);this.CodeMirror=q()}})(function(){function q(a,b){if(!(this instanceof q))return new q(a,b);this.options=b=b?va(b):{};va(Hf,b,!1);fa(b);var c=b.value;"string"==typeof c&&(c=new na(c,b.mode,null,b.lineSeparator));this.doc=c;var d=new q.inputStyles[b.inputStyle](this);a=this.display=new J(a,c,d);a.wrapper.CodeMirror=this;ia(this);F(this);b.lineWrapping&&
(this.display.wrapper.className+=" CodeMirror-wrap");b.autofocus&&!Db&&a.input.focus();H(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Eb,keySeq:null,specialChars:null};var e=this;P&&11>U&&setTimeout(function(){e.display.input.reset(!0)},20);If(this);Ud||(Jf(),Ud=!0);ib(this);this.curOp.forceUpdate=!0;Vd(this,c);b.autofocus&&!Db||e.hasFocus()?setTimeout(Fb(Yc,this),20):
Gb(this);for(var f in jb)if(jb.hasOwnProperty(f))jb[f](this,b[f],Wd);Xd(this);b.finishInit&&b.finishInit(this);for(c=0;c<Zc.length;++c)Zc[c](this);kb(this);da&&b.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}function J(a,b,c){this.input=c;this.scrollbarFiller=y("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content","true");this.gutterFiller=y("div",null,"CodeMirror-gutter-filler");this.gutterFiller.setAttribute("cm-not-content",
"true");this.lineDiv=y("div",null,"CodeMirror-code");this.selectionDiv=y("div",null,null,"position: relative; z-index: 1");this.cursorDiv=y("div",null,"CodeMirror-cursors");this.measure=y("div",null,"CodeMirror-measure");this.lineMeasure=y("div",null,"CodeMirror-measure");this.lineSpace=y("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");this.mover=y("div",[y("div",[this.lineSpace],"CodeMirror-lines")],null,"position: relative");
this.sizer=y("div",[this.mover],"CodeMirror-sizer");this.sizerWidth=null;this.heightForcer=y("div",null,null,"position: absolute; height: "+Yd+"px; width: 1px;");this.gutters=y("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=y("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=y("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");P&&8>U&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=
0);da||Va&&Db||(this.scroller.draggable=!0);a&&(a.appendChild?a.appendChild(this.wrapper):a(this.wrapper));this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=b.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=!1;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=
this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;c.init(this)}function B(a){a.doc.mode=q.getMode(a.options,a.doc.modeOption);O(a)}function O(a){a.doc.iter(function(b){b.stateAfter&&(b.stateAfter=null);b.styles&&(b.styles=null)});a.doc.frontier=a.doc.first;Hb(a,100);a.state.modeGen++;a.curOp&&oa(a)}function u(a){var b=
Wa(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/Ib(a.display)-3);return function(e){if(Xa(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function K(a){var b=a.doc,c=u(a);b.iter(function(d){var e=c(d);e!=d.height&&Ba(d,e)})}function F(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g,
" cm-s-");Jb(a)}function Y(a){ia(a);oa(a);setTimeout(function(){$c(a)},20)}function ia(a){var b=a.display.gutters,c=a.options.gutters;Ya(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(y("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none";Kb(a)}function Kb(a){a.display.sizer.style.marginLeft=a.display.gutters.offsetWidth+"px"}function lb(a){if(0==a.height)return 0;for(var b=a.text.length,
c,d=a;c=Za(d,!0);)c=c.find(0,!0),d=c.from.line,b+=c.from.ch-c.to.ch;for(d=a;c=Za(d,!1);)c=c.find(0,!0),b-=d.text.length-c.from.ch,d=c.to.line,b+=d.text.length-c.to.ch;return b}function mb(a){var b=a.display;a=a.doc;b.maxLine=z(a,a.first);b.maxLineLength=lb(b.maxLine);b.maxLineChanged=!0;a.iter(function(c){var d=lb(c);d>b.maxLineLength&&(b.maxLineLength=d,b.maxLine=c)})}function fa(a){var b=ja(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):
-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function Pa(a){var b=a.display,c=b.gutters.offsetWidth,d=Math.round(a.doc.height+ad(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+Ca(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,gutterWidth:c}}function Lb(a,b,c){this.cm=
c;var d=this.vert=y("div",[y("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),e=this.horiz=y("div",[y("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a(d);a(e);A(d,"scroll",function(){d.clientHeight&&b(d.scrollTop,"vertical")});A(e,"scroll",function(){e.clientWidth&&b(e.scrollLeft,"horizontal")});this.checkedOverlay=!1;P&&8>U&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function w(){}function H(a){a.display.scrollbars&&(a.display.scrollbars.clear(),
a.display.scrollbars.addClass&&Mb(a.display.wrapper,a.display.scrollbars.addClass));a.display.scrollbars=new q.scrollbarModel[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,a.display.scrollbarFiller);A(b,"mousedown",function(){a.state.focused&&setTimeout(function(){a.display.input.focus()},0)});b.setAttribute("cm-not-content","true")},function(b,c){"horizontal"==c?nb(a,b):Nb(a,b)},a);a.display.scrollbars.addClass&&Ob(a.display.wrapper,a.display.scrollbars.addClass)}function M(a,
b){b||(b=Pa(a));var c=a.display.barWidth,d=a.display.barHeight;pa(a,b);for(b=0;4>b&&c!=a.display.barWidth||d!=a.display.barHeight;b++)c!=a.display.barWidth&&a.options.lineWrapping&&kc(a),pa(a,Pa(a)),c=a.display.barWidth,d=a.display.barHeight}function pa(a,b){var c=a.display,d=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=d.right)+"px";c.sizer.style.paddingBottom=(c.barHeight=d.bottom)+"px";d.right&&d.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=d.bottom+
"px",c.scrollbarFiller.style.width=d.right+"px"):c.scrollbarFiller.style.display="";d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}function $a(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop;d=Math.floor(d-a.lineSpace.offsetTop);var e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight;d=ab(b,d);e=ab(b,
e);if(c&&c.ensure){var f=c.ensure.from.line;c=c.ensure.to.line;f<d?(d=f,e=ab(b,Da(z(b,f))+a.wrapper.clientHeight)):Math.min(c,b.lastLine())>=e&&(d=ab(b,Da(z(b,c))-a.wrapper.clientHeight),e=c)}return{from:d,to:Math.max(e,d+1)}}function $c(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=bd(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&c[g].gutter&&(c[g].gutter.style.left=
f);var h=c[g].alignable;if(h)for(var k=0;k<h.length;k++)h[k].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function Xd(a){if(!a.options.lineNumbers)return!1;var b=a.doc;b=cd(a.options,b.first+b.size-1);var c=a.display;if(b.length!=c.lineNumChars){var d=c.measure.appendChild(y("div",[y("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),e=d.firstChild.offsetWidth;d=d.offsetWidth-e;c.lineGutter.style.width="";c.lineNumInnerWidth=Math.max(e,c.lineGutter.offsetWidth-d)+1;
c.lineNumWidth=c.lineNumInnerWidth+d;c.lineNumChars=c.lineNumInnerWidth?b.length:-1;c.lineGutter.style.width=c.lineNumWidth+"px";Kb(a);return!0}return!1}function cd(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function bd(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function lc(a,b,c){var d=a.display;this.viewport=b;this.visible=$a(d,a.doc,b);this.editorIsHidden=!d.wrapper.offsetWidth;this.wrapperHeight=d.wrapper.clientHeight;this.wrapperWidth=
d.wrapper.clientWidth;this.oldDisplayWidth=Qa(a);this.force=c;this.dims=dd(a);this.events=[]}function ed(a,b){var c=a.display,d=a.doc;if(b.editorIsHidden)return Ra(a),!1;if(!b.force&&b.visible.from>=c.viewFrom&&b.visible.to<=c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&0==Zd(a))return!1;Xd(a)&&(Ra(a),b.dims=dd(a));var e=d.first+d.size,f=Math.max(b.visible.from-a.options.viewportMargin,d.first),g=Math.min(e,b.visible.to+a.options.viewportMargin);c.viewFrom<
f&&20>f-c.viewFrom&&(f=Math.max(d.first,c.viewFrom));c.viewTo>g&&20>c.viewTo-g&&(g=Math.min(e,c.viewTo));Sa&&(f=fd(a.doc,f),g=$d(a.doc,g));d=f!=c.viewFrom||g!=c.viewTo||c.lastWrapHeight!=b.wrapperHeight||c.lastWrapWidth!=b.wrapperWidth;e=a.display;0==e.view.length||f>=e.viewTo||g<=e.viewFrom?(e.view=mc(a,f,g),e.viewFrom=f):(e.viewFrom>f?e.view=mc(a,f,e.viewFrom).concat(e.view):e.viewFrom<f&&(e.view=e.view.slice(bb(a,f))),e.viewFrom=f,e.viewTo<g?e.view=e.view.concat(mc(a,e.viewTo,g)):e.viewTo>g&&(e.view=
e.view.slice(0,bb(a,g))));e.viewTo=g;c.viewOffset=Da(z(a.doc,c.viewFrom));a.display.mover.style.top=c.viewOffset+"px";g=Zd(a);if(!d&&0==g&&!b.force&&c.renderedView==c.view&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;f=Ea();4<g&&(c.lineDiv.style.display="none");Kf(a,c.updateLineNumbers,b.dims);4<g&&(c.lineDiv.style.display="");c.renderedView=c.view;f&&Ea()!=f&&f.offsetHeight&&f.focus();Ya(c.cursorDiv);Ya(c.selectionDiv);c.gutters.style.height=c.sizer.style.minHeight=0;d&&(c.lastWrapHeight=
b.wrapperHeight,c.lastWrapWidth=b.wrapperWidth,Hb(a,400));c.updateLineNumbers=null;return!0}function ae(a,b){for(var c=b.viewport,d=!0;;d=!1){if(!d||!a.options.lineWrapping||b.oldDisplayWidth==Qa(a))if(c&&null!=c.top&&(c={top:Math.min(a.doc.height+ad(a.display)-gd(a),c.top)}),b.visible=$a(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!ed(a,b))break;kc(a);d=Pa(a);Pb(a);hd(a,d);M(a,d)}b.signal(a,"update",a);if(a.display.viewFrom!=a.display.reportedViewFrom||
a.display.viewTo!=a.display.reportedViewTo)b.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo}function id(a,b){b=new lc(a,b);if(ed(a,b)){kc(a);ae(a,b);var c=Pa(a);Pb(a);hd(a,c);M(a,c);b.finish()}}function hd(a,b){a.display.sizer.style.minHeight=b.docHeight+"px";var c=b.docHeight+a.display.barHeight;a.display.heightForcer.style.top=c+"px";a.display.gutters.style.height=Math.max(c+Ca(a),b.clientHeight)+
"px"}function kc(a){a=a.display;for(var b=a.lineDiv.offsetTop,c=0;c<a.view.length;c++){var d=a.view[c];if(!d.hidden){if(P&&8>U){var e=d.node.offsetTop+d.node.offsetHeight;var f=e-b;b=e}else f=d.node.getBoundingClientRect(),f=f.bottom-f.top;e=d.line.height-f;2>f&&(f=Wa(a));if(.001<e||-.001>e)if(Ba(d.line,f),be(d.line),d.rest)for(f=0;f<d.rest.length;f++)be(d.rest[f])}}}function be(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.offsetHeight}function dd(a){for(var b=
a.display,c={},d={},e=b.gutters.clientLeft,f=b.gutters.firstChild,g=0;f;f=f.nextSibling,++g)c[a.options.gutters[g]]=f.offsetLeft+f.clientLeft+e,d[a.options.gutters[g]]=f.clientWidth;return{fixedPos:bd(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function Kf(a,b,c){function d(n){var r=n.nextSibling;da&&wa&&a.display.currentWheelTarget==n?n.style.display="none":n.parentNode.removeChild(n);return r}var e=a.display,f=a.options.lineNumbers,g=
e.lineDiv,h=g.firstChild,k=e.view;e=e.viewFrom;for(var l=0;l<k.length;l++){var m=k[l];if(!m.hidden)if(m.node&&m.node.parentNode==g){for(;h!=m.node;)h=d(h);h=f&&null!=b&&b<=e&&m.lineNumber;m.changes&&(-1<ja(m.changes,"gutter")&&(h=!1),ce(a,m,e,c));h&&(Ya(m.lineNumber),m.lineNumber.appendChild(document.createTextNode(cd(a.options,e))));h=m.node.nextSibling}else{var p=Lf(a,m,e,c);g.insertBefore(p,h)}e+=m.size}for(;h;)h=d(h)}function ce(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];
if("text"==f){f=b;var g=f.text.className,h=de(a,f);f.text==f.node&&(f.node=h.pre);f.text.parentNode.replaceChild(h.pre,f.text);f.text=h.pre;h.bgClass!=f.bgClass||h.textClass!=f.textClass?(f.bgClass=h.bgClass,f.textClass=h.textClass,jd(f)):g&&(f.text.className=g)}else if("gutter"==f)ee(a,b,c,d);else if("class"==f)jd(b);else if("widget"==f){g=a;h=b;var k=d;h.alignable&&(h.alignable=null);for(var l=h.node.firstChild;l;l=f)f=l.nextSibling,"CodeMirror-linewidget"==l.className&&h.node.removeChild(l);fe(g,
h,k)}}b.changes=null}function Qb(a){a.node==a.text&&(a.node=y("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),P&&8>U&&(a.node.style.zIndex=2));return a.node}function de(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):ge(a,b)}function jd(a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;b&&(b+=" CodeMirror-linebackground");
if(a.background)b?a.background.className=b:(a.background.parentNode.removeChild(a.background),a.background=null);else if(b){var c=Qb(a);a.background=c.insertBefore(y("div",null,b),c.firstChild)}a.line.wrapClass?Qb(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");a.text.className=(a.textClass?a.textClass+" "+(a.line.textClass||""):a.line.textClass)||""}function ee(a,b,c,d){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);b.gutterBackground&&(b.node.removeChild(b.gutterBackground),
b.gutterBackground=null);if(b.line.gutterClass){var e=Qb(b);b.gutterBackground=y("div",null,"CodeMirror-gutter-background "+b.line.gutterClass,"left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px");e.insertBefore(b.gutterBackground,b.text)}var f=b.line.gutterMarkers;if(a.options.lineNumbers||f){e=Qb(b);var g=b.gutter=y("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px");a.display.input.setUneditable(g);
e.insertBefore(g,b.text);b.line.gutterClass&&(g.className+=" "+b.line.gutterClass);!a.options.lineNumbers||f&&f["CodeMirror-linenumbers"]||(b.lineNumber=g.appendChild(y("div",cd(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px")));if(f)for(b=0;b<a.options.gutters.length;++b)c=a.options.gutters[b],(e=f.hasOwnProperty(c)&&f[c])&&g.appendChild(y("div",[e],"CodeMirror-gutter-elt","left: "+d.gutterLeft[c]+
"px; width: "+d.gutterWidth[c]+"px"))}}function Lf(a,b,c,d){var e=de(a,b);b.text=b.node=e.pre;e.bgClass&&(b.bgClass=e.bgClass);e.textClass&&(b.textClass=e.textClass);jd(b);ee(a,b,c,d);fe(a,b,d);return b.node}function fe(a,b,c){he(a,b.line,b,c,!0);if(b.rest)for(var d=0;d<b.rest.length;d++)he(a,b.rest[d],b,c,!1)}function he(a,b,c,d,e){if(b.widgets){var f=Qb(c),g=0;for(b=b.widgets;g<b.length;++g){var h=b[g],k=y("div",[h.node],"CodeMirror-linewidget");h.handleMouseEvents||k.setAttribute("cm-ignore-events",
"true");var l=h,m=k,p=d;if(l.noHScroll){(c.alignable||(c.alignable=[])).push(m);var n=p.wrapperWidth;m.style.left=p.fixedPos+"px";l.coverGutter||(n-=p.gutterTotalWidth,m.style.paddingLeft=p.gutterTotalWidth+"px");m.style.width=n+"px"}l.coverGutter&&(m.style.zIndex=5,m.style.position="relative",l.noHScroll||(m.style.marginLeft=-p.gutterTotalWidth+"px"));a.display.input.setUneditable(k);e&&h.above?f.insertBefore(k,c.gutter||c.text):f.appendChild(k);ka(h,"redraw")}}}function kd(a){return t(a.line,a.ch)}
function nc(a,b){return 0>I(a,b)?b:a}function oc(a,b){return 0>I(a,b)?a:b}function ie(a){a.state.focused||(a.display.input.focus(),Yc(a))}function pc(a){return a.options.readOnly||a.doc.cantEdit}function qc(a,b,c,d,e){var f=a.doc;a.display.shift=!1;d||(d=f.sel);var g=a.state.pasteIncoming||"paste"==e,h=f.splitLines(b),k=null;if(g&&1<d.ranges.length)if(sa&&sa.join("\n")==b){if(0==d.ranges.length%sa.length){k=[];for(var l=0;l<sa.length;l++)k.push(f.splitLines(sa[l]))}}else h.length==d.ranges.length&&
(k=rc(h,function(r){return[r]}));for(l=d.ranges.length-1;0<=l;l--){var m=d.ranges[l],p=m.from(),n=m.to();m.empty()&&(c&&0<c?p=t(p.line,p.ch-c):a.state.overwrite&&!g&&(n=t(n.line,Math.min(z(f,n.line).text.length,n.ch+R(h).length))));m=a.curOp.updateInput;p={from:p,to:n,text:k?k[l%k.length]:h,origin:e||(g?"paste":a.state.cutIncoming?"cut":"+input")};ob(a.doc,p);ka(a,"inputRead",a,p)}b&&!g&&je(a,b);pb(a);a.curOp.updateInput=m;a.curOp.typing=!0;a.state.pasteIncoming=a.state.cutIncoming=!1}function ke(a,
b){var c=a.clipboardData&&a.clipboardData.getData("text/plain");if(c)return a.preventDefault(),qa(b,function(){qc(b,c,0,null,"paste")}),!0}function je(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,d=c.ranges.length-1;0<=d;d--){var e=c.ranges[d];if(!(100<e.head.ch||d&&c.ranges[d-1].head.line==e.head.line)){var f=a.getModeAt(e.head),g=!1;if(f.electricChars)for(var h=0;h<f.electricChars.length;h++){if(-1<b.indexOf(f.electricChars.charAt(h))){g=Rb(a,e.head.line,"smart");break}}else f.electricInput&&
f.electricInput.test(z(a.doc,e.head.line).text.slice(0,e.head.ch))&&(g=Rb(a,e.head.line,"smart"));g&&ka(a,"electricInput",a,e.head.line)}}}function le(a){for(var b=[],c=[],d=0;d<a.doc.sel.ranges.length;d++){var e=a.doc.sel.ranges[d].head.line;e={anchor:t(e,0),head:t(e+1,0)};c.push(e);b.push(a.getRange(e.anchor,e.head))}return{text:b,ranges:c}}function me(a){a.setAttribute("autocorrect","off");a.setAttribute("autocapitalize","off");a.setAttribute("spellcheck","false")}function ld(a){this.cm=a;this.prevInput=
"";this.pollingFast=!1;this.polling=new Eb;this.hasSelection=this.inaccurateSelection=!1;this.composing=null}function ne(){var a=y("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),b=y("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");da?a.style.width="1000px":a.setAttribute("wrap","off");qb&&(a.style.border="1px solid black");me(a);return b}function md(a){this.cm=a;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=
this.lastFocusOffset=null;this.polling=new Eb;this.gracePeriod=!1}function oe(a,b){var c=nd(a,b.line);if(!c||c.hidden)return null;a=z(a.doc,b.line);c=pe(c,a,b.line);a=xa(a);var d="left";a&&(d=sc(a,b.ch)%2?"right":"left");b=qe(c.map,b.ch,d);b.offset="right"==b.collapse?b.end:b.start;return b}function rb(a,b){b&&(a.bad=!0);return a}function tc(a,b,c){if(b==a.display.lineDiv){var d=a.display.lineDiv.childNodes[c];if(!d)return rb(a.clipPos(t(a.display.viewTo-1)),!0);b=null;c=0}else for(d=b;;d=d.parentNode){if(!d||
d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var e=0;e<a.display.view.length;e++){var f=a.display.view[e];if(f.node==d)return Mf(f,b,c)}}function Mf(a,b,c){function d(m,p,n){for(var r=-1;r<(l?l.length:0);r++)for(var v=0>r?k.map:l[r],x=0;x<v.length;x+=3){var X=v[x+2];if(X==m||X==p){p=S(0>r?a.line:a.rest[r]);r=v[x]+n;if(0>n||X!=m)r=v[x+(n?1:0)];return t(p,r)}}}var e=a.text.firstChild,f=!1;if(!b||!od(e,b))return rb(t(S(a.line),0),!0);if(b==e&&(f=!0,b=e.childNodes[c],
c=0,!b))return c=a.rest?R(a.rest):a.line,rb(t(S(c),c.text.length),f);var g=3==b.nodeType?b:null,h=b;g||1!=b.childNodes.length||3!=b.firstChild.nodeType||(g=b.firstChild,c&&(c=g.nodeValue.length));for(;h.parentNode!=e;)h=h.parentNode;var k=a.measure,l=k.maps;if(b=d(g,h,c))return rb(b,f);e=h.nextSibling;for(g=g?g.nodeValue.length-c:0;e;e=e.nextSibling){if(b=d(e,e.firstChild,0))return rb(t(b.line,b.ch-g),f);g+=e.textContent.length}h=h.previousSibling;for(g=c;h;h=h.previousSibling){if(b=d(h,h.firstChild,
-1))return rb(t(b.line,b.ch+g),f);g+=e.textContent.length}}function Nf(a,b,c,d,e){function f(m){return function(p){return p.id==m}}function g(m){if(1==m.nodeType){var p=m.getAttribute("cm-text");if(null!=p)""==p&&(p=m.textContent.replace(/\u200b/g,"")),h+=p;else{p=m.getAttribute("cm-marker");var n;if(p)m=a.findMarks(t(d,0),t(e+1,0),f(+p)),m.length&&(n=m[0].find())&&(h+=cb(a.doc,n.from,n.to).join(l));else if("false"!=m.getAttribute("contenteditable")){for(n=0;n<m.childNodes.length;n++)g(m.childNodes[n]);
/^(pre|div|p)$/i.test(m.nodeName)&&(k=!0)}}}else 3==m.nodeType&&(m=m.nodeValue)&&(k&&(h+=l,k=!1),h+=m)}for(var h="",k=!1,l=a.doc.lineSeparator();;){g(b);if(b==c)break;b=b.nextSibling}return h}function Ka(a,b){this.ranges=a;this.primIndex=b}function T(a,b){this.anchor=a;this.head=b}function ya(a,b){b=a[b];a.sort(function(h,k){return I(h.from(),k.from())});b=ja(a,b);for(var c=1;c<a.length;c++){var d=a[c],e=a[c-1];if(0<=I(e.to(),d.from())){var f=oc(e.from(),d.from()),g=nc(e.to(),d.to());d=e.empty()?
d.from()==d.head:e.from()==e.head;c<=b&&--b;a.splice(--c,2,new T(d?g:f,d?f:g))}}return new Ka(a,b)}function Fa(a,b){return new Ka([new T(a,b||a)],0)}function G(a,b){if(b.line<a.first)return t(a.first,0);var c=a.first+a.size-1;if(b.line>c)return t(c,z(a,c).text.length);a=z(a,b.line).text.length;c=b.ch;b=null==c||c>a?t(b.line,a):0>c?t(b.line,0):b;return b}function Sb(a,b){return b>=a.first&&b<a.first+a.size}function Tb(a,b,c,d){return a.cm&&a.cm.display.shift||a.extend?(a=b.anchor,d&&(b=0>I(c,a),b!=
0>I(d,a)?(a=c,c=d):b!=0>I(c,d)&&(c=d)),new T(a,c)):new T(d||c,c)}function uc(a,b,c,d){ea(a,new Ka([Tb(a,a.sel.primary(),b,c)],0),d)}function re(a,b,c){for(var d=[],e=0;e<a.sel.ranges.length;e++)d[e]=Tb(a,a.sel.ranges[e],b[e],null);b=ya(d,a.sel.primIndex);ea(a,b,c)}function pd(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c;ea(a,ya(e,a.sel.primIndex),d)}function Of(a,b){var c={ranges:b.ranges,update:function(d){this.ranges=[];for(var e=0;e<d.length;e++)this.ranges[e]=new T(G(a,d[e].anchor),G(a,d[e].head))}};
ca(a,"beforeSelectionChange",a,c);a.cm&&ca(a.cm,"beforeSelectionChange",a.cm,c);return c.ranges!=b.ranges?ya(c.ranges,c.ranges.length-1):b}function se(a,b,c){var d=a.history.done,e=R(d);e&&e.ranges?(d[d.length-1]=b,vc(a,b,c)):ea(a,b,c)}function ea(a,b,c){vc(a,b,c);b=a.sel;var d=a.cm?a.cm.curOp.id:NaN,e=a.history,f=c&&c.origin,g;if(!(g=d==e.lastSelOp)&&(g=f&&e.lastSelOrigin==f)&&!(g=e.lastModTime==e.lastSelTime&&e.lastOrigin==f)){g=R(e.done);var h=f.charAt(0);g="*"==h||"+"==h&&g.ranges.length==b.ranges.length&&
g.somethingSelected()==b.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}g?e.done[e.done.length-1]=b:wc(b,e.done);e.lastSelTime=+new Date;e.lastSelOrigin=f;e.lastSelOp=d;c&&!1!==c.clearRedo&&te(e.undone)}function vc(a,b,c){if(ta(a,"beforeSelectionChange")||a.cm&&ta(a.cm,"beforeSelectionChange"))b=Of(a,b);var d=c&&c.bias||(0>I(b.primary().head,a.sel.primary().head)?-1:1);ue(a,ve(a,b,d,!0));c&&!1===c.scroll||!a.cm||pb(a.cm)}function ue(a,b){b.equals(a.sel)||
(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,we(a.cm)),ka(a,"cursorActivity",a))}function xe(a){ue(a,ve(a,a.sel,null,!1),Ga)}function ve(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=xc(a,g.anchor,c,d),k=xc(a,g.head,c,d);if(e||h!=g.anchor||k!=g.head)e||(e=b.ranges.slice(0,f)),e[f]=new T(h,k)}return e?ya(e,b.primIndex):b}function xc(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var h=z(a,f.line);if(h.markedSpans)for(var k=0;k<h.markedSpans.length;++k){var l=
h.markedSpans[k],m=l.marker;if((null==l.from||(m.inclusiveLeft?l.from<=f.ch:l.from<f.ch))&&(null==l.to||(m.inclusiveRight?l.to>=f.ch:l.to>f.ch))){if(d&&(ca(m,"beforeCursorEnter"),m.explicitlyCleared))if(h.markedSpans){--k;continue}else break;if(m.atomic){k=m.find(0>g?-1:1);if(0==I(k,f)&&(k.ch+=g,0>k.ch?k=k.line>a.first?G(a,t(k.line-1)):null:k.ch>h.text.length&&(k=k.line<a.first+a.size-1?t(k.line+1,0):null),!k)){if(e){if(!d)return xc(a,b,c,!0);a.cantEdit=!0;return t(a.first,0)}e=!0;k=b;g=-g}f=k;continue a}}}return f}}
function Pb(a){a.display.input.showSelection(a.display.input.prepareSelection())}function ye(a,b){for(var c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++)if(!1!==b||g!=c.sel.primIndex){var h=c.sel.ranges[g],k=h.empty();if(k||a.options.showCursorWhenSelecting){var l=a,m=e,p=La(l,h.head,"div",null,null,!l.options.singleCursorHeightPerLine),n=m.appendChild(y("div","\u00a0","CodeMirror-cursor"));n.style.left=p.left+
"px";n.style.top=p.top+"px";n.style.height=Math.max(0,p.bottom-p.top)*l.options.cursorHeight+"px";p.other&&(l=m.appendChild(y("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor")),l.style.display="",l.style.left=p.other.left+"px",l.style.top=p.other.top+"px",l.style.height=.85*(p.other.bottom-p.other.top)+"px")}k||Pf(a,h,f)}return d}function Pf(a,b,c){function d(n,r,v,x){0>r&&(r=0);r=Math.round(r);x=Math.round(x);h.appendChild(y("div",null,"CodeMirror-selected","position: absolute; left: "+
n+"px; top: "+r+"px; width: "+(null==v?m-n:v)+"px; height: "+(x-r)+"px"))}function e(n,r,v){var x=z(g,n),X=x.text.length,V,aa;Qf(xa(x),r||0,null==v?X:v,function(Q,C,N){var L=yc(a,t(n,Q),"div",x,"left"),W;if(Q==C){var D=L;N=W=L.left}else D=yc(a,t(n,C-1),"div",x,"right"),"rtl"==N&&(N=L,L=D,D=N),N=L.left,W=D.right;null==r&&0==Q&&(N=l);3<D.top-L.top&&(d(N,L.top,null,L.bottom),N=l,L.bottom<D.top&&d(N,L.bottom,null,D.top));null==v&&C==X&&(W=m);if(!V||L.top<V.top||L.top==V.top&&L.left<V.left)V=L;if(!aa||
D.bottom>aa.bottom||D.bottom==aa.bottom&&D.right>aa.right)aa=D;N<l+1&&(N=l);d(N,D.top,W-N,D.bottom)});return{start:V,end:aa}}var f=a.display,g=a.doc,h=document.createDocumentFragment(),k=ze(a.display),l=k.left,m=Math.max(f.sizerWidth,Qa(a)-f.sizer.offsetLeft)-k.right;f=b.from();b=b.to();if(f.line==b.line)e(f.line,f.ch,b.ch);else{var p=z(g,f.line);k=z(g,b.line);k=Ha(p)==Ha(k);f=e(f.line,f.ch,k?p.text.length+1:null).end;b=e(b.line,k?0:null,b.ch).start;k&&(f.top<b.top-2?(d(f.right,f.top,null,f.bottom),
d(l,b.top,b.left,b.bottom)):d(f.right,f.top,b.left-f.right,f.bottom));f.bottom<b.top&&d(l,f.bottom,null,b.top)}c.appendChild(h)}function qd(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="";0<a.options.cursorBlinkRate?b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&(b.cursorDiv.style.visibility="hidden")}}function Hb(a,b){a.doc.mode.startState&&a.doc.frontier<
a.display.viewTo&&a.state.highlight.set(b,Fb(Rf,a))}function Rf(a){var b=a.doc;b.frontier<b.first&&(b.frontier=b.first);if(!(b.frontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=sb(b.mode,Ub(a,b.frontier)),e=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.viewTo+500),function(f){if(b.frontier>=a.display.viewFrom){var g=f.styles,h=Ae(a,f,d,!0);f.styles=h.styles;var k=f.styleClasses;(h=h.classes)?f.styleClasses=h:k&&(f.styleClasses=null);k=!g||g.length!=f.styles.length||k!=h&&
(!k||!h||k.bgClass!=h.bgClass||k.textClass!=h.textClass);for(h=0;!k&&h<g.length;++h)k=g[h]!=f.styles[h];k&&e.push(b.frontier);f.stateAfter=sb(b.mode,d)}else rd(a,f.text,d),f.stateAfter=0==b.frontier%5?sb(b.mode,d):null;++b.frontier;if(+new Date>c)return Hb(a,a.options.workDelay),!0});e.length&&qa(a,function(){for(var f=0;f<e.length;f++)Ma(a,e[f],"text")})}}function Sf(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>g;--b){if(b<=f.first)return f.first;var h=z(f,b-1);if(h.stateAfter&&
(!c||b<=f.frontier))return b;h=za(h.text,null,a.options.tabSize);if(null==e||d>h)e=b-1,d=h}return e}function Ub(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=Sf(a,b,c),g=f>d.first&&z(d,f-1).stateAfter;g=g?sb(d.mode,g):Tf(d.mode);d.iter(f,b,function(h){rd(a,h.text,g);h.stateAfter=f==b-1||0==f%5||f>=e.viewFrom&&f<e.viewTo?sb(d.mode,g):null;++f});c&&(d.frontier=f);return g}function ad(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function ze(a){if(a.cachedPaddingH)return a.cachedPaddingH;
var b=ua(a.measure,y("pre","x"));b=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle;b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b);return b}function Ca(a){return Yd-a.display.nativeBarWidth}function Qa(a){return a.display.scroller.clientWidth-Ca(a)-a.display.barWidth}function gd(a){return a.display.scroller.clientHeight-Ca(a)-a.display.barHeight}function pe(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};
for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(d=0;d<a.rest.length;d++)if(S(a.rest[d])>c)return{map:a.measure.maps[d],cache:a.measure.caches[d],before:!0}}function nd(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[bb(a,b)];if((a=a.display.externalMeasured)&&b>=a.lineN&&b<a.lineN+a.size)return a}function zc(a,b){var c=S(b),d=nd(a,c);d&&!d.text?d=null:d&&d.changes&&(ce(a,d,c,dd(a)),a.curOp.forceUpdate=!0);if(!d){var e=
Ha(b);d=S(e);e=a.display.externalMeasured=new Be(a.doc,e,d);e.lineN=d;d=e.built=ge(a,e);e.text=d.pre;ua(a.display.lineMeasure,d.pre);d=e}a=pe(d,b,c);return{line:b,view:d,rect:null,map:a.map,cache:a.cache,before:a.before,hasHeights:!1}}function sd(a,b,c,d,e){b.before&&(c=-1);var f=c+(d||"");if(b.cache.hasOwnProperty(f))a=b.cache[f];else{b.rect||(b.rect=b.view.text.getBoundingClientRect());if(!b.hasHeights){var g=b.view,h=b.rect,k=a.options.lineWrapping,l=k&&Qa(a);if(!g.measure.heights||k&&g.measure.width!=
l){var m=g.measure.heights=[];if(k)for(g.measure.width=l,g=g.text.firstChild.getClientRects(),k=0;k<g.length-1;k++){l=g[k];var p=g[k+1];2<Math.abs(l.bottom-p.bottom)&&m.push((l.bottom+p.top)/2-h.top)}m.push(h.bottom-h.top)}b.hasHeights=!0}g=d;k=qe(b.map,c,g);d=k.node;h=k.start;l=k.end;c=k.collapse;if(3==d.nodeType){for(m=0;4>m;m++){for(;h&&Vb(b.line.text.charAt(k.coverStart+h));)--h;for(;k.coverStart+l<k.coverEnd&&Vb(b.line.text.charAt(k.coverStart+l));)++l;if(P&&9>U&&0==h&&l==k.coverEnd-k.coverStart)var n=
d.parentNode.getBoundingClientRect();else if(P&&a.options.lineWrapping){var r=tb(d,h,l).getClientRects();n=r.length?r["right"==g?r.length-1:0]:td}else n=tb(d,h,l).getBoundingClientRect()||td;if(n.left||n.right||0==h)break;l=h;--h;c="right"}P&&11>U&&((r=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI)||(null!=ud?r=ud:(m=ua(a.display.measure,y("span","x")),r=m.getBoundingClientRect(),m=tb(m,0,1).getBoundingClientRect(),r=ud=1<Math.abs(r.left-m.left)),r=!r),r||(r=screen.logicalXDPI/
screen.deviceXDPI,m=screen.logicalYDPI/screen.deviceYDPI,n={left:n.left*r,right:n.right*r,top:n.top*m,bottom:n.bottom*m}))}else 0<h&&(c=g="right"),n=a.options.lineWrapping&&1<(r=d.getClientRects()).length?r["right"==g?r.length-1:0]:d.getBoundingClientRect();!(P&&9>U)||h||n&&(n.left||n.right)||(n=(n=d.parentNode.getClientRects()[0])?{left:n.left,right:n.left+Ib(a.display),top:n.top,bottom:n.bottom}:td);r=n.top-b.rect.top;d=n.bottom-b.rect.top;h=(r+d)/2;g=b.view.measure.heights;for(m=0;m<g.length-1&&
!(h<g[m]);m++);c={left:("right"==c?n.right:n.left)-b.rect.left,right:("left"==c?n.left:n.right)-b.rect.left,top:m?g[m-1]:0,bottom:g[m]};n.left||n.right||(c.bogus=!0);a.options.singleCursorHeightPerLine||(c.rtop=r,c.rbottom=d);a=c;a.bogus||(b.cache[f]=a)}return{left:a.left,right:a.right,top:e?a.rtop:a.top,bottom:e?a.rbottom:a.bottom}}function qe(a,b,c){for(var d,e,f,g,h=0;h<a.length;h+=3){var k=a[h],l=a[h+1];if(b<k)e=0,f=1,g="left";else if(b<l)e=b-k,f=e+1;else if(h==a.length-3||b==l&&a[h+3]>b)f=l-
k,e=f-1,b>=l&&(g="right");if(null!=e){d=a[h+2];k==l&&c==(d.insertLeft?"left":"right")&&(g=c);if("left"==c&&0==e)for(;h&&a[h-2]==a[h-3]&&a[h-1].insertLeft;)d=a[(h-=3)+2],g="left";if("right"==c&&e==l-k)for(;h<a.length-3&&a[h+3]==a[h+4]&&!a[h+5].insertLeft;)d=a[(h+=3)+2],g="right";break}}return{node:d,start:e,end:f,collapse:g,coverStart:k,coverEnd:l}}function Ce(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function De(a){a.display.externalMeasure=
null;Ya(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)Ce(a.display.view[b])}function Jb(a){De(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function vd(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=Wb(b.widgets[e]);c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=Da(b);b="local"==d?b+a.display.lineSpace.offsetTop:
b-a.display.viewOffset;if("page"==d||"window"==d)a=a.display.lineSpace.getBoundingClientRect(),b+=a.top+("window"==d?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),d=a.left+("window"==d?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function Ee(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,b-=window.pageYOffset||
(document.documentElement||document.body).scrollTop):"local"!=c&&c||(c=a.display.sizer.getBoundingClientRect(),d+=c.left,b+=c.top);a=a.display.lineSpace.getBoundingClientRect();return{left:d-a.left,top:b-a.top}}function yc(a,b,c,d,e){d||(d=z(a.doc,b.line));var f=d;b=b.ch;d=sd(a,zc(a,d),b,e);return vd(a,f,d,c)}function La(a,b,c,d,e,f){function g(m,p){m=sd(a,e,m,p?"right":"left",f);p?m.left=m.right:m.right=m.left;return vd(a,d,m,c)}function h(m,p){var n=k[p],r=n.level%2;m==wd(n)&&p&&n.level<k[p-1].level?
(n=k[--p],m=xd(n)-(n.level%2?0:1),r=!0):m==xd(n)&&p<k.length-1&&n.level<k[p+1].level&&(n=k[++p],m=wd(n)-n.level%2,r=!1);return r&&m==n.to&&m>n.from?g(m-1):g(m,r)}d=d||z(a.doc,b.line);e||(e=zc(a,d));var k=xa(d);b=b.ch;if(!k)return g(b);var l=sc(k,b);l=h(b,l);null!=Xb&&(l.other=h(b,Xb));return l}function Fe(a,b){var c=0;b=G(a.doc,b);a.options.lineWrapping||(c=Ib(a.display)*b.ch);b=z(a.doc,b.line);a=Da(b)+a.display.lineSpace.offsetTop;return{left:c,right:c,top:a,bottom:a+b.height}}function Ac(a,b,c,
d){a=t(a,b);a.xRel=d;c&&(a.outside=!0);return a}function yd(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return Ac(d.first,0,!0,-1);var e=ab(d,c),f=d.first+d.size-1;if(e>f)return Ac(d.first+d.size-1,z(d,f).text.length,!0,1);0>b&&(b=0);for(d=z(d,e);;)if(e=Uf(a,d,e,b,c),f=(d=Za(d,!1))&&d.find(0,!0),d&&(e.ch>f.from.ch||e.ch==f.from.ch&&0<e.xRel))e=S(d=f.to.line);else return e}function Uf(a,b,c,d,e){function f(C){C=La(a,t(c,C),"line",b,l);h=!0;if(g>C.bottom)return C.left-k;if(g<C.top)return C.left+
k;h=!1;return C.left}var g=e-Da(b),h=!1,k=2*a.display.wrapper.clientWidth,l=zc(a,b),m=xa(b),p=b.text.length;e=Bc(b);var n=Cc(b),r=f(e),v=h,x=f(n),X=h;if(d>x)return Ac(c,n,X,1);for(;;){if(m?n==e||n==zd(b,e,1):1>=n-e){m=d<r||d-r<=x-d?e:n;for(d-=m==e?r:x;Vb(b.text.charAt(m));)++m;return Ac(c,m,m==e?v:X,-1>d?-1:1<d?1:0)}var V=Math.ceil(p/2),aa=e+V;if(m){aa=e;for(var Q=0;Q<V;++Q)aa=zd(b,aa,1)}Q=f(aa);if(Q>d){n=aa;x=Q;if(X=h)x+=1E3;p=V}else e=aa,r=Q,v=h,p-=V}}function Wa(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;
if(null==db){db=y("pre");for(var b=0;49>b;++b)db.appendChild(document.createTextNode("x")),db.appendChild(y("br"));db.appendChild(document.createTextNode("x"))}ua(a.measure,db);b=db.offsetHeight/50;3<b&&(a.cachedTextHeight=b);Ya(a.measure);return b||1}function Ib(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=y("span","xxxxxxxxxx"),c=y("pre",[b]);ua(a.measure,c);b=b.getBoundingClientRect();b=(b.right-b.left)/10;2<b&&(a.cachedCharWidth=b);return b||10}function ib(a){a.curOp={cm:a,viewChanged:!1,
startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Vf};ub?ub.ops.push(a.curOp):a.curOp.ownsGroup=ub={ops:[a.curOp],delayedCallbacks:[]}}function kb(a){if(a=a.curOp.ownsGroup)try{var b=a.delayedCallbacks,c=0;do{for(;c<b.length;c++)b[c]();for(var d=0;d<a.ops.length;d++){var e=a.ops[d];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<
e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++](e.cm)}}while(c<b.length)}finally{ub=null;for(b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;a=a.ops;for(b=0;b<a.length;b++){e=a[b];c=e.cm;var f=d=c.display;!f.scrollbarsClipped&&f.scroller.offsetWidth&&(f.nativeBarWidth=f.scroller.offsetWidth-f.scroller.clientWidth,f.heightForcer.style.height=Ca(c)+"px",f.sizer.style.marginBottom=-f.nativeBarWidth+"px",f.sizer.style.borderRightWidth=Ca(c)+"px",f.scrollbarsClipped=!0);
e.updateMaxLine&&mb(c);e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<d.viewFrom||e.scrollToPos.to.line>=d.viewTo)||d.maxLineChanged&&c.options.lineWrapping;e.update=e.mustUpdate&&new lc(c,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}for(b=0;b<a.length;b++)e=a[b],e.updatedDisplay=e.mustUpdate&&ed(e.cm,e.update);for(b=0;b<a.length;b++)if(e=a[b],c=e.cm,d=c.display,e.updatedDisplay&&kc(c),e.barMeasure=Pa(c),d.maxLineChanged&&
!c.options.lineWrapping&&(f=d.maxLine.text.length,f=sd(c,zc(c,d.maxLine),f,void 0),e.adjustWidthTo=f.left+3,c.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(d.scroller.clientWidth,d.sizer.offsetLeft+e.adjustWidthTo+Ca(c)+c.display.barWidth),e.maxScrollLeft=Math.max(0,d.sizer.offsetLeft+e.adjustWidthTo-Qa(c))),e.updatedDisplay||e.selectionChanged)e.preparedSelection=d.input.prepareSelection();for(b=0;b<a.length;b++)e=a[b],c=e.cm,null!=e.adjustWidthTo&&(c.display.sizer.style.minWidth=
e.adjustWidthTo+"px",e.maxScrollLeft<c.doc.scrollLeft&&nb(c,Math.min(c.display.scroller.scrollLeft,e.maxScrollLeft),!0),c.display.maxLineChanged=!1),e.preparedSelection&&c.display.input.showSelection(e.preparedSelection),e.updatedDisplay&&hd(c,e.barMeasure),(e.updatedDisplay||e.startHeight!=c.doc.height)&&M(c,e.barMeasure),e.selectionChanged&&qd(c),c.state.focused&&e.updateInput&&c.display.input.reset(e.typing),e.focus&&e.focus==Ea()&&ie(e.cm);for(b=0;b<a.length;b++){e=a[b];c=e.cm;d=c.display;f=c.doc;
e.updatedDisplay&&ae(c,e.update);null==d.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(d.wheelStartX=d.wheelStartY=null);null==e.scrollTop||d.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(f.scrollTop=Math.max(0,Math.min(d.scroller.scrollHeight-d.scroller.clientHeight,e.scrollTop)),d.scrollbars.setScrollTop(f.scrollTop),d.scroller.scrollTop=f.scrollTop);null==e.scrollLeft||d.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(f.scrollLeft=Math.max(0,Math.min(d.scroller.scrollWidth-
Qa(c),e.scrollLeft)),d.scrollbars.setScrollLeft(f.scrollLeft),d.scroller.scrollLeft=f.scrollLeft,$c(c));if(e.scrollToPos){var g=G(f,e.scrollToPos.from);var h=G(f,e.scrollToPos.to);var k=e.scrollToPos.margin;null==k&&(k=0);for(var l=0;5>l;l++){var m=!1,p=La(c,g),n=h&&h!=g?La(c,h):p;n=Dc(c,Math.min(p.left,n.left),Math.min(p.top,n.top)-k,Math.max(p.left,n.left),Math.max(p.bottom,n.bottom)+k);var r=c.doc.scrollTop,v=c.doc.scrollLeft;null!=n.scrollTop&&(Nb(c,n.scrollTop),1<Math.abs(c.doc.scrollTop-r)&&
(m=!0));null!=n.scrollLeft&&(nb(c,n.scrollLeft),1<Math.abs(c.doc.scrollLeft-v)&&(m=!0));if(!m)break}h=p;e.scrollToPos.isCursor&&c.state.focused&&(Ia(c,"scrollCursorIntoView")||(k=c.display,l=k.sizer.getBoundingClientRect(),g=null,0>h.top+l.top?g=!0:h.bottom+l.top>(window.innerHeight||document.documentElement.clientHeight)&&(g=!1),null==g||Wf||(h=y("div","\u200b",null,"position: absolute; top: "+(h.top-k.viewOffset-c.display.lineSpace.offsetTop)+"px; height: "+(h.bottom-h.top+Ca(c)+k.barHeight)+"px; left: "+
h.left+"px; width: 2px;"),c.display.lineSpace.appendChild(h),h.scrollIntoView(g),c.display.lineSpace.removeChild(h))))}g=e.maybeHiddenMarkers;h=e.maybeUnhiddenMarkers;if(g)for(k=0;k<g.length;++k)g[k].lines.length||ca(g[k],"hide");if(h)for(k=0;k<h.length;++k)h[k].lines.length&&ca(h[k],"unhide");d.wrapper.offsetHeight&&(f.scrollTop=c.display.scroller.scrollTop);e.changeObjs&&ca(c,"changes",c,e.changeObjs);e.update&&e.update.finish()}}}function qa(a,b){if(a.curOp)return b();ib(a);try{return b()}finally{kb(a)}}
function ba(a,b){return function(){if(a.curOp)return b.apply(a,arguments);ib(a);try{return b.apply(a,arguments)}finally{kb(a)}}}function ha(a){return function(){if(this.curOp)return a.apply(this,arguments);ib(this);try{return a.apply(this,arguments)}finally{kb(this)}}}function la(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);ib(b);try{return a.apply(this,arguments)}finally{kb(b)}}}function Be(a,b,c){for(var d=this.line=b,e;d=Za(d,!1);)d=d.find(1,!0).line,(e||(e=
[])).push(d);this.size=(this.rest=e)?S(R(this.rest))-c+1:1;this.node=this.text=null;this.hidden=Xa(a,b)}function mc(a,b,c){var d=[],e;for(e=b;e<c;)b=new Be(a.doc,z(a.doc,e),e),e+=b.size,d.push(b);return d}function oa(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);d||(d=0);var e=a.display;d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b);a.curOp.viewChanged=!0;if(b>=e.viewTo)Sa&&fd(a.doc,b)<e.viewTo&&Ra(a);else if(c<=e.viewFrom)Sa&&$d(a.doc,
c+d)>e.viewFrom?Ra(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)Ra(a);else if(b<=e.viewFrom){var f=Ec(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):Ra(a)}else if(c>=e.viewTo)(f=Ec(a,b,b,-1))?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):Ra(a);else{f=Ec(a,b,b,-1);var g=Ec(a,c,c+d,1);f&&g?(e.view=e.view.slice(0,f.index).concat(mc(a,f.lineN,g.lineN)).concat(e.view.slice(g.index)),e.viewTo+=d):Ra(a)}if(a=e.externalMeasured)c<a.lineN?a.lineN+=d:b<a.lineN+
a.size&&(e.externalMeasured=null)}function Ma(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null);b<d.viewFrom||b>=d.viewTo||(a=d.view[bb(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==ja(a,c)&&a.push(c)))}function Ra(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function bb(a,b){if(b>=a.display.viewTo)return null;b-=a.display.viewFrom;if(0>b)return null;a=a.display.view;
for(var c=0;c<a.length;c++)if(b-=a[c].size,0>b)return c}function Ec(a,b,c,d){var e=bb(a,b),f=a.display.view;if(!Sa||c==a.doc.first+a.doc.size)return{index:e,lineN:c};for(var g=0,h=a.display.viewFrom;g<e;g++)h+=f[g].size;if(h!=b){if(0<d){if(e==f.length-1)return null;b=h+f[e].size-b;e++}else b=h-b;c+=b}for(;fd(a.doc,c)!=c;){if(e==(0>d?0:f.length-1))return null;c+=d*f[e-(0>d?1:0)].size;e+=d}return{index:e,lineN:c}}function Zd(a){a=a.display.view;for(var b=0,c=0;c<a.length;c++){var d=a[c];d.hidden||d.node&&
!d.changes||++b}return b}function If(a){function b(){d.activeTouch&&(e=setTimeout(function(){d.activeTouch=null},1E3),f=d.activeTouch,f.end=+new Date)}function c(h,k){if(null==k.left)return!0;var l=k.left-h.left;h=k.top-h.top;return 400<l*l+h*h}var d=a.display;A(d.scroller,"mousedown",ba(a,Ge));P&&11>U?A(d.scroller,"dblclick",ba(a,function(h){if(!Ia(a,h)){var k=vb(a,h);!k||Ad(a,h,"gutterClick",!0,ka)||Na(a.display,h)||(ma(h),h=a.findWordAt(k),uc(a.doc,h.anchor,h.head))}})):A(d.scroller,"dblclick",
function(h){Ia(a,h)||ma(h)});Bd||A(d.scroller,"contextmenu",function(h){He(a,h)});var e,f={end:0};A(d.scroller,"touchstart",function(h){if(1!=h.touches.length)var k=!1;else k=h.touches[0],k=1>=k.radiusX&&1>=k.radiusY;k||(clearTimeout(e),k=+new Date,d.activeTouch={start:k,moved:!1,prev:300>=k-f.end?f:null},1==h.touches.length&&(d.activeTouch.left=h.touches[0].pageX,d.activeTouch.top=h.touches[0].pageY))});A(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)});A(d.scroller,"touchend",
function(h){var k=d.activeTouch;if(k&&!Na(d,h)&&null!=k.left&&!k.moved&&300>new Date-k.start){var l=a.coordsChar(d.activeTouch,"page");k=!k.prev||c(k,k.prev)?new T(l,l):!k.prev.prev||c(k,k.prev.prev)?a.findWordAt(l):new T(t(l.line,0),G(a.doc,t(l.line+1,0)));a.setSelection(k.anchor,k.head);a.focus();ma(h)}b()});A(d.scroller,"touchcancel",b);A(d.scroller,"scroll",function(){d.scroller.clientHeight&&(Nb(a,d.scroller.scrollTop),nb(a,d.scroller.scrollLeft,!0),ca(a,"scroll",a))});A(d.scroller,"mousewheel",
function(h){Ie(a,h)});A(d.scroller,"DOMMouseScroll",function(h){Ie(a,h)});A(d.wrapper,"scroll",function(){d.wrapper.scrollTop=d.wrapper.scrollLeft=0});d.dragFunctions={simple:function(h){Ia(a,h)||Cd(h)},start:function(h){if(P&&(!a.state.draggingText||100>+new Date-Je))Cd(h);else if(!Ia(a,h)&&!Na(a.display,h)&&(h.dataTransfer.setData("Text",a.getSelection()),h.dataTransfer.setDragImage&&!Ke)){var k=y("img",null,null,"position: fixed; left: 0; top: 0;");k.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";
Aa&&(k.width=k.height=1,a.display.wrapper.appendChild(k),k._top=k.offsetTop);h.dataTransfer.setDragImage(k,0,0);Aa&&k.parentNode.removeChild(k)}},drop:ba(a,Xf)};var g=d.input.getField();A(g,"keyup",function(h){Le.call(a,h)});A(g,"keydown",ba(a,Me));A(g,"keypress",ba(a,Ne));A(g,"focus",Fb(Yc,a));A(g,"blur",Fb(Gb,a))}function Yf(a){var b=a.display;if(b.lastWrapHeight!=b.wrapper.clientHeight||b.lastWrapWidth!=b.wrapper.clientWidth)b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.scrollbarsClipped=
!1,a.setSize()}function Na(a,b){for(b=b.target||b.srcElement;b!=a.wrapper;b=b.parentNode)if(!b||1==b.nodeType&&"true"==b.getAttribute("cm-ignore-events")||b.parentNode==a.sizer&&b!=a.mover)return!0}function vb(a,b,c,d){var e=a.display;if(!c&&"true"==(b.target||b.srcElement).getAttribute("cm-not-content"))return null;c=e.lineSpace.getBoundingClientRect();try{var f=b.clientX-c.left;var g=b.clientY-c.top}catch(k){return null}b=yd(a,f,g);var h;d&&1==b.xRel&&(h=z(a.doc,b.line).text).length==b.ch&&(d=za(h,
h.length,a.options.tabSize)-h.length,b=t(b.line,Math.max(0,Math.round((f-ze(a.display).left)/Ib(a.display))-d)));return b}function Ge(a){var b=this.display;if(!(b.activeTouch&&b.input.supportsTouch()||Ia(this,a)))if(b.shift=a.shiftKey,Na(b,a))da||(b.scroller.draggable=!1,setTimeout(function(){b.scroller.draggable=!0},100));else if(!Ad(this,a,"gutterClick",!0,ka)){var c=vb(this,a);window.focus();switch(Oe(a)){case 1:c?Zf(this,a,c):(a.target||a.srcElement)==b.scroller&&ma(a);break;case 2:da&&(this.state.lastMiddleDown=
+new Date);c&&uc(this.doc,c);setTimeout(function(){b.input.focus()},20);ma(a);break;case 3:Bd?He(this,a):$f(this)}}}function Zf(a,b,c){P?setTimeout(Fb(ie,a),0):a.curOp.focus=Ea();var d=+new Date;if(Fc&&Fc.time>d-400&&0==I(Fc.pos,c))var e="triple";else Gc&&Gc.time>d-400&&0==I(Gc.pos,c)?(e="double",Fc={time:d,pos:c}):(e="single",Gc={time:d,pos:c});d=a.doc.sel;var f=wa?b.metaKey:b.ctrlKey,g;a.options.dragDrop&&ag&&!pc(a)&&"single"==e&&-1<(g=d.contains(c))&&(0>I((g=d.ranges[g]).from(),c)||0<c.xRel)&&
(0<I(g.to(),c)||0>c.xRel)?bg(a,b,c,f):cg(a,b,c,e,f)}function bg(a,b,c,d){var e=a.display,f=+new Date,g=ba(a,function(h){da&&(e.scroller.draggable=!1);a.state.draggingText=!1;Ja(document,"mouseup",g);Ja(e.scroller,"drop",g);10>Math.abs(b.clientX-h.clientX)+Math.abs(b.clientY-h.clientY)&&(ma(h),!d&&+new Date-200<f&&uc(a.doc,c),da||P&&9==U?setTimeout(function(){document.body.focus();e.input.focus()},20):e.input.focus())});da&&(e.scroller.draggable=!0);a.state.draggingText=g;e.scroller.dragDrop&&e.scroller.dragDrop();
A(document,"mouseup",g);A(e.scroller,"drop",g)}function cg(a,b,c,d,e){function f(C){if(0!=I(x,C))if(x=C,"rect"==d){var N=[],L=a.options.tabSize,W=za(z(l,c.line).text,c.ch,L),D=za(z(l,C.line).text,C.ch,L),Z=Math.min(W,D);W=Math.max(W,D);D=Math.min(c.line,C.line);for(var Oa=Math.min(a.lastLine(),Math.max(c.line,C.line));D<=Oa;D++){var Dd=z(l,D).text,Hc=Pe(Dd,Z,L);Z==W?N.push(new T(t(D,Hc),t(D,Hc))):Dd.length>Hc&&N.push(new T(t(D,Hc),t(D,Pe(Dd,W,L))))}N.length||N.push(new T(c,c));ea(l,ya(m.ranges.slice(0,
n).concat(N),n),{origin:"*mouse",scroll:!1});a.scrollIntoView(C)}else N=r,L=N.anchor,Z=C,"single"!=d&&(C="double"==d?a.findWordAt(C):new T(t(C.line,0),G(l,t(C.line+1,0))),0<I(C.anchor,L)?(Z=C.head,L=oc(N.from(),C.anchor)):(Z=C.anchor,L=nc(N.to(),C.head))),N=m.ranges.slice(0),N[n]=new T(G(l,L),Z),ea(l,ya(N,n),Ed)}function g(C){var N=++V,L=vb(a,C,!0,"rect"==d);if(L)if(0!=I(L,x)){a.curOp.focus=Ea();f(L);var W=$a(k,l);(L.line>=W.to||L.line<W.from)&&setTimeout(ba(a,function(){V==N&&g(C)}),150)}else{var D=
C.clientY<X.top?-20:C.clientY>X.bottom?20:0;D&&setTimeout(ba(a,function(){V==N&&(k.scroller.scrollTop+=D,g(C))}),50)}}function h(C){V=Infinity;ma(C);k.input.focus();Ja(document,"mousemove",aa);Ja(document,"mouseup",Q);l.history.lastSelOrigin=null}var k=a.display,l=a.doc;ma(b);var m=l.sel,p=m.ranges;if(e&&!b.shiftKey){var n=l.sel.contains(c);var r=-1<n?p[n]:new T(c,c)}else r=l.sel.primary(),n=l.sel.primIndex;if(b.altKey)d="rect",e||(r=new T(c,c)),c=vb(a,b,!0,!0),n=-1;else if("double"==d){var v=a.findWordAt(c);
r=a.display.shift||l.extend?Tb(l,r,v.anchor,v.head):v}else"triple"==d?(v=new T(t(c.line,0),G(l,t(c.line+1,0))),r=a.display.shift||l.extend?Tb(l,r,v.anchor,v.head):v):r=Tb(l,r,c);e?-1==n?(n=p.length,ea(l,ya(p.concat([r]),n),{scroll:!1,origin:"*mouse"})):1<p.length&&p[n].empty()&&"single"==d&&!b.shiftKey?(ea(l,ya(p.slice(0,n).concat(p.slice(n+1)),0)),m=l.sel):pd(l,n,r,Ed):(n=0,ea(l,new Ka([r],0),Ed),m=l.sel);var x=c,X=k.wrapper.getBoundingClientRect(),V=0,aa=ba(a,function(C){Oe(C)?g(C):h(C)}),Q=ba(a,
h);A(document,"mousemove",aa);A(document,"mouseup",Q)}function Ad(a,b,c,d,e){try{var f=b.clientX,g=b.clientY}catch(l){return!1}if(f>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&ma(b);d=a.display;var h=d.lineDiv.getBoundingClientRect();if(g>h.bottom||!ta(a,c))return Fd(b);g-=h.top-d.viewOffset;for(h=0;h<a.options.gutters.length;++h){var k=d.gutters.childNodes[h];if(k&&k.getBoundingClientRect().right>=f)return f=ab(a.doc,g),e(a,c,a,f,a.options.gutters[h],b),Fd(b)}}function Xf(a){var b=
this;if(!Ia(b,a)&&!Na(b.display,a)){ma(a);P&&(Je=+new Date);var c=vb(b,a,!0),d=a.dataTransfer.files;if(c&&!pc(b))if(d&&d.length&&window.FileReader&&window.File){var e=d.length,f=Array(e),g=0;a=function(l,m){var p=new FileReader;p.onload=ba(b,function(){f[m]=p.result;if(++g==e){c=G(b.doc,c);var n={from:c,to:c,text:b.doc.splitLines(f.join(b.doc.lineSeparator())),origin:"paste"};ob(b.doc,n);se(b.doc,Fa(c,eb(n)))}});p.readAsText(l)};for(var h=0;h<e;++h)a(d[h],h)}else if(b.state.draggingText&&-1<b.doc.sel.contains(c))b.state.draggingText(a),
setTimeout(function(){b.display.input.focus()},20);else try{if(f=a.dataTransfer.getData("Text")){if(b.state.draggingText&&(wa?!a.altKey:!a.ctrlKey))var k=b.listSelections();vc(b.doc,Fa(c,c));if(k)for(h=0;h<k.length;++h)wb(b.doc,"",k[h].anchor,k[h].head,"drag");b.replaceSelection(f,"around","paste");b.display.input.focus()}}catch(l){}}}function Nb(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,Va||id(a,{top:b}),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbars.setScrollTop(b),
Va&&id(a),Hb(a,100))}function nb(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,$c(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function Ie(a,b){var c=Qe(b),d=c.x;c=c.y;var e=a.display,f=e.scroller;if(d&&f.scrollWidth>f.clientWidth||c&&f.scrollHeight>f.clientHeight){if(c&&wa&&da){var g=b.target,h=e.view;a:for(;g!=f;g=g.parentNode)for(var k=
0;k<h.length;k++)if(h[k].node==g){a.display.currentWheelTarget=g;break a}}!d||Va||Aa||null==ra?(c&&null!=ra&&(b=c*ra,g=a.doc.scrollTop,h=g+e.wrapper.clientHeight,0>b?g=Math.max(0,g+b-50):h=Math.min(a.doc.height,h+b+50),id(a,{top:g,bottom:h})),20>Ic&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=d,e.wheelDY=c,setTimeout(function(){if(null!=e.wheelStartX){var l=f.scrollLeft-e.wheelStartX,m=f.scrollTop-e.wheelStartY;l=m&&e.wheelDY&&m/e.wheelDY||l&&e.wheelDX&&l/
e.wheelDX;e.wheelStartX=e.wheelStartY=null;l&&(ra=(ra*Ic+l)/(Ic+1),++Ic)}},200)):(e.wheelDX+=d,e.wheelDY+=c))):(c&&Nb(a,Math.max(0,Math.min(f.scrollTop+c*ra,f.scrollHeight-f.clientHeight))),nb(a,Math.max(0,Math.min(f.scrollLeft+d*ra,f.scrollWidth-f.clientWidth))),ma(b),e.wheelStartX=null)}}function Jc(a,b,c){if("string"==typeof b&&(b=Kc[b],!b))return!1;a.display.input.ensurePolled();var d=a.display.shift,e=!1;try{pc(a)&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=Re}finally{a.display.shift=
d,a.state.suppressEdits=!1}return e}function dg(a,b,c){for(var d=0;d<a.state.keyMaps.length;d++){var e=Yb(b,a.state.keyMaps[d],c,a);if(e)return e}return a.options.extraKeys&&Yb(b,a.options.extraKeys,c,a)||Yb(b,a.options.keyMap,c,a)}function Lc(a,b,c,d){var e=a.state.keySeq;if(e){if(eg(b))return"handled";fg.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())});b=e+" "+b}d=dg(a,b,d);"multi"==d&&(a.state.keySeq=b);"handled"==d&&ka(a,"keyHandled",a,b,c);if("handled"==d||
"multi"==d)ma(c),qd(a);return e&&!d&&/'$/.test(b)?(ma(c),!0):!!d}function Se(a,b){var c=gg(b,!0);return c?b.shiftKey&&!a.state.keySeq?Lc(a,"Shift-"+c,b,function(d){return Jc(a,d,!0)})||Lc(a,c,b,function(d){if("string"==typeof d?/^go[A-Z]/.test(d):d.motion)return Jc(a,d)}):Lc(a,c,b,function(d){return Jc(a,d)}):!1}function hg(a,b,c){return Lc(a,"'"+c+"'",b,function(d){return Jc(a,d,!0)})}function Me(a){this.curOp.focus=Ea();if(!Ia(this,a)){P&&11>U&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;
this.display.shift=16==b||a.shiftKey;var c=Se(this,a);Aa&&(Gd=c?b:null,!c&&88==b&&!Te&&(wa?a.metaKey:a.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||ig(this)}}function ig(a){function b(d){18!=d.keyCode&&d.altKey||(Mb(c,"CodeMirror-crosshair"),Ja(document,"keyup",b),Ja(document,"mouseover",b))}var c=a.display.lineDiv;Ob(c,"CodeMirror-crosshair");A(document,"keyup",b);A(document,"mouseover",b)}function Le(a){16==a.keyCode&&(this.doc.sel.shift=
!1);Ia(this,a)}function Ne(a){if(!(Na(this.display,a)||Ia(this,a)||a.ctrlKey&&!a.altKey||wa&&a.metaKey)){var b=a.keyCode,c=a.charCode;if(Aa&&b==Gd)Gd=null,ma(a);else if(!Aa||a.which&&!(10>a.which)||!Se(this,a))if(b=String.fromCharCode(null==c?b:c),!hg(this,a,b))this.display.input.onKeyPress(a)}}function $f(a){a.state.delayingBlurEvent=!0;setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,Gb(a))},100)}function Yc(a){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=
!1);"nocursor"!=a.options.readOnly&&(a.state.focused||(ca(a,"focus",a),a.state.focused=!0,Ob(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),da&&setTimeout(function(){a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),qd(a))}function Gb(a){a.state.delayingBlurEvent||(a.state.focused&&(ca(a,"blur",a),a.state.focused=!1,Mb(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||
(a.display.shift=!1)},150))}function He(a,b){var c;(c=Na(a.display,b))||(c=ta(a,"gutterContextMenu")?Ad(a,b,"gutterContextMenu",!1,ca):!1);if(!c)a.display.input.onContextMenu(b)}function Ue(a,b){if(0>I(a,b.from))return a;if(0>=I(a,b.to))return eb(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;a.line==b.to.line&&(d+=eb(b).ch-b.to.ch);return t(c,d)}function Hd(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new T(Ue(e.anchor,b),Ue(e.head,b)))}return ya(c,
a.sel.primIndex)}function Ve(a,b,c){return a.line==b.line?t(c.line,a.ch-b.ch+c.ch):t(c.line+(a.line-b.line),a.ch)}function We(a,b,c){b={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};c&&(b.update=function(d,e,f,g){d&&(this.from=G(a,d));e&&(this.to=G(a,e));f&&(this.text=f);void 0!==g&&(this.origin=g)});ca(a,"beforeChange",a,b);a.cm&&ca(a.cm,"beforeChange",a.cm,b);return b.canceled?null:{from:b.from,to:b.to,text:b.text,origin:b.origin}}function ob(a,
b,c){if(a.cm){if(!a.cm.curOp)return ba(a.cm,ob)(a,b,c);if(a.cm.state.suppressEdits)return}if(ta(a,"beforeChange")||a.cm&&ta(a.cm,"beforeChange"))if(b=We(a,b,!0),!b)return;if(c=Xe&&!c&&jg(a,b.from,b.to))for(var d=c.length-1;0<=d;--d)Ye(a,{from:c[d].from,to:c[d].to,text:d?[""]:b.text});else Ye(a,b)}function Ye(a,b){if(1!=b.text.length||""!=b.text[0]||0!=I(b.from,b.to)){var c=Hd(a,b);Ze(a,b,c,a.cm?a.cm.curOp.id:NaN);Zb(a,b,c,Id(a,b));var d=[];fb(a,function(e,f){f||-1!=ja(d,e.history)||($e(e.history,
b),d.push(e.history));Zb(e,b,null,Id(e,b))})}}function Mc(a,b,c){if(!a.cm||!a.cm.state.suppressEdits){for(var d=a.history,e,f=a.sel,g="undo"==b?d.done:d.undone,h="undo"==b?d.undone:d.done,k=0;k<g.length&&(e=g[k],c?!e.ranges||e.equals(a.sel):e.ranges);k++);if(k!=g.length){for(d.lastOrigin=d.lastSelOrigin=null;;)if(e=g.pop(),e.ranges){wc(e,h);if(c&&!e.equals(a.sel)){ea(a,e,{clearRedo:!1});return}f=e}else break;c=[];wc(f,h);h.push({changes:c,generation:d.generation});d.generation=e.generation||++d.maxGeneration;
d=ta(a,"beforeChange")||a.cm&&ta(a.cm,"beforeChange");for(k=e.changes.length-1;0<=k;--k){var l=e.changes[k];l.origin=b;if(d&&!We(a,l,!1)){g.length=0;break}c.push(Jd(a,l));f=k?Hd(a,l):R(g);Zb(a,l,f,af(a,l));!k&&a.cm&&a.cm.scrollIntoView({from:l.from,to:eb(l)});var m=[];fb(a,function(p,n){n||-1!=ja(m,p.history)||($e(p.history,l),m.push(p.history));Zb(p,l,null,af(p,l))})}}}}function bf(a,b){if(0!=b&&(a.first+=b,a.sel=new Ka(rc(a.sel.ranges,function(e){return new T(t(e.anchor.line+b,e.anchor.ch),t(e.head.line+
b,e.head.ch))}),a.sel.primIndex),a.cm)){oa(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)Ma(a.cm,d,"gutter")}}function Zb(a,b,c,d){if(a.cm&&!a.cm.curOp)return ba(a.cm,Zb)(a,b,c,d);if(b.to.line<a.first)bf(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);bf(a,e);b={from:t(a.first,0),to:t(b.to.line+e,b.to.ch),text:[R(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b=
{from:b.from,to:t(e,z(a,e).text.length),text:[b.text[0]],origin:b.origin});b.removed=cb(a,b.from,b.to);c||(c=Hd(a,b));a.cm?kg(a.cm,b,d):Kd(a,b,d);vc(a,c,Ga)}}function kg(a,b,c){var d=a.doc,e=a.display,f=b.from,g=b.to,h=!1,k=f.line;a.options.lineWrapping||(k=S(Ha(z(d,f.line))),d.iter(k,g.line+1,function(l){if(l==e.maxLine)return h=!0}));-1<d.sel.contains(b.from,b.to)&&we(a);Kd(d,b,c,u(a));a.options.lineWrapping||(d.iter(k,f.line+b.text.length,function(l){var m=lb(l);m>e.maxLineLength&&(e.maxLine=l,
e.maxLineLength=m,e.maxLineChanged=!0,h=!1)}),h&&(a.curOp.updateMaxLine=!0));d.frontier=Math.min(d.frontier,f.line);Hb(a,400);c=b.text.length-(g.line-f.line)-1;b.full?oa(a):f.line!=g.line||1!=b.text.length||cf(a.doc,b)?oa(a,f.line,g.line+1,c):Ma(a,f.line,"text");c=ta(a,"changes");if((d=ta(a,"change"))||c)b={from:f,to:g,text:b.text,removed:b.removed,origin:b.origin},d&&ka(a,"change",a,b),c&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(b);a.display.selForContextMenu=null}function wb(a,b,c,d,e){d||
(d=c);if(0>I(d,c)){var f=d;d=c;c=f}"string"==typeof b&&(b=a.splitLines(b));ob(a,{from:c,to:d,text:b,origin:e})}function Dc(a,b,c,d,e){var f=a.display,g=Wa(a.display);0>c&&(c=0);var h=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:f.scroller.scrollTop,k=gd(a),l={};e-c>k&&(e=c+k);var m=a.doc.height+ad(f),p=c<g;g=e>m-g;c<h?l.scrollTop=p?0:c:e>h+k&&(c=Math.min(c,(g?m:e)-k),c!=h&&(l.scrollTop=c));h=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:f.scroller.scrollLeft;a=Qa(a)-(a.options.fixedGutter?
f.gutters.offsetWidth:0);(f=d-b>a)&&(d=b+a);10>b?l.scrollLeft=0:b<h?l.scrollLeft=Math.max(0,b-(f?0:10)):d>a+h-3&&(l.scrollLeft=d+(f?0:10)-a);return l}function Nc(a,b,c){null==b&&null==c||Oc(a);null!=b&&(a.curOp.scrollLeft=(null==a.curOp.scrollLeft?a.doc.scrollLeft:a.curOp.scrollLeft)+b);null!=c&&(a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+c)}function pb(a){Oc(a);var b=a.getCursor(),c=b,d=b;a.options.lineWrapping||(c=b.ch?t(b.line,b.ch-1):b,d=t(b.line,b.ch+1));a.curOp.scrollToPos=
{from:c,to:d,margin:a.options.cursorScrollMargin,isCursor:!0}}function Oc(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=Fe(a,b.from),d=Fe(a,b.to);b=Dc(a,Math.min(c.left,d.left),Math.min(c.top,d.top)-b.margin,Math.max(c.right,d.right),Math.max(c.bottom,d.bottom)+b.margin);a.scrollTo(b.scrollLeft,b.scrollTop)}}function Rb(a,b,c,d){var e=a.doc,f;null==c&&(c="add");"smart"==c&&(e.mode.indent?f=Ub(a,b):c="prev");var g=a.options.tabSize,h=z(e,b),k=za(h.text,null,g);h.stateAfter&&(h.stateAfter=
null);var l=h.text.match(/^\s*/)[0];if(!d&&!/\S/.test(h.text)){var m=0;c="not"}else if("smart"==c&&(m=e.mode.indent(f,h.text.slice(l.length),h.text),m==Re||150<m)){if(!d)return;c="prev"}"prev"==c?m=b>e.first?za(z(e,b-1).text,null,g):0:"add"==c?m=k+a.options.indentUnit:"subtract"==c?m=k-a.options.indentUnit:"number"==typeof c&&(m=k+c);m=Math.max(0,m);c="";d=0;if(a.options.indentWithTabs)for(a=Math.floor(m/g);a;--a)d+=g,c+="\t";d<m&&(c+=df(m-d));if(c!=l)return wb(e,c,t(b,0),t(b,l.length),"+input"),
h.stateAfter=null,!0;for(a=0;a<e.sel.ranges.length;a++)if(g=e.sel.ranges[a],g.head.line==b&&g.head.ch<l.length){d=t(b,l.length);pd(e,a,new T(d,d));break}}function Pc(a,b,c,d){var e=b,f=b;"number"==typeof b?f=z(a,Math.max(a.first,Math.min(b,a.first+a.size-1))):e=S(b);if(null==e)return null;d(f,e)&&a.cm&&Ma(a.cm,e,c);return f}function xb(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&0>=I(f.from,R(d).to);){var g=d.pop();if(0>I(g.from,f.from)){f.from=g.from;break}}d.push(f)}qa(a,
function(){for(var h=d.length-1;0<=h;h--)wb(a.doc,"",d[h].from,d[h].to,"+delete");pb(a)})}function Ld(a,b,c,d,e){function f(v){var x=(e?zd:ef)(l,h,c,!0);if(null==x){if(v=!v)v=g+c,v<a.first||v>=a.first+a.size?v=m=!1:(g=v,v=l=z(a,v));if(v)h=e?(0>c?Cc:Bc)(l):0>c?l.text.length:0;else return m=!1}else h=x;return!0}var g=b.line,h=b.ch,k=c,l=z(a,g),m=!0;if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){var p=null;d="group"==d;b=a.cm&&a.cm.getHelper(b,"wordChars");for(var n=!0;!(0>
c)||f(!n);n=!1){var r=l.text.charAt(h)||"\n";r=Qc(r,b)?"w":d&&"\n"==r?"n":!d||/\s/.test(r)?null:"p";!d||n||r||(r="s");if(p&&p!=r){0>c&&(c=1,f());break}r&&(p=r);if(0<c&&!f(!n))break}}k=xc(a,t(g,h),k,!0);m||(k.hitSide=!0);return k}function ff(a,b,c,d){var e=a.doc,f=b.left,g;for("page"==d?g=b.top+c*(Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight)-(0>c?1.5:.5)*Wa(a.display)):"line"==d&&(g=0<c?b.bottom+3:b.top-3);;){b=yd(a,f,g);if(!b.outside)break;if(0>
c?0>=g:g>=e.height){b.hitSide=!0;break}g+=5*c}return b}function E(a,b,c,d){q.defaults[a]=b;c&&(jb[a]=d?function(e,f,g){g!=Wd&&c(e,f,g)}:c)}function lg(a){var b=a.split(/-(?!$)/);a=b[b.length-1];for(var c,d,e,f,g=0;g<b.length-1;g++){var h=b[g];if(/^(cmd|meta|m)$/i.test(h))f=!0;else if(/^a(lt)?$/i.test(h))c=!0;else if(/^(c|ctrl|control)$/i.test(h))d=!0;else if(/^s(hift)$/i.test(h))e=!0;else throw Error("Unrecognized modifier name: "+h);}c&&(a="Alt-"+a);d&&(a="Ctrl-"+a);f&&(a="Cmd-"+a);e&&(a="Shift-"+
a);return a}function Rc(a){return"string"==typeof a?Ta[a]:a}function yb(a,b,c,d,e){if(d&&d.shared)return mg(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return ba(a.cm,yb)(a,b,c,d,e);var f=new gb(a,e);e=I(b,c);d&&va(d,f,!1);if(0<e||0==e&&!1!==f.clearWhenEmpty)return f;f.replacedWith&&(f.collapsed=!0,f.widgetNode=y("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||f.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(f.widgetNode.insertLeft=!0));if(f.collapsed){if(gf(a,b.line,b,c,
f)||b.line!=c.line&&gf(a,c.line,b,c,f))throw Error("Inserting collapsed marker partially overlapping an existing one");Sa=!0}f.addToHistory&&Ze(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var g=b.line,h=a.cm,k;a.iter(g,c.line+1,function(l){h&&f.collapsed&&!h.options.lineWrapping&&Ha(l)==h.display.maxLine&&(k=!0);f.collapsed&&g!=b.line&&Ba(l,0);var m=new Sc(f,g==b.line?b.ch:null,g==c.line?c.ch:null);l.markedSpans=l.markedSpans?l.markedSpans.concat([m]):[m];m.marker.attachLine(l);++g});f.collapsed&&
a.iter(b.line,c.line+1,function(l){Xa(a,l)&&Ba(l,0)});f.clearOnEnter&&A(f,"beforeCursorEnter",function(){f.clear()});f.readOnly&&(Xe=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());f.collapsed&&(f.id=++Md,f.atomic=!0);if(h){k&&(h.curOp.updateMaxLine=!0);if(f.collapsed)oa(h,b.line,c.line+1);else if(f.className||f.title||f.startStyle||f.endStyle||f.css)for(d=b.line;d<=c.line;d++)Ma(h,d,"text");f.atomic&&xe(h.doc);ka(h,"markerAdded",h,f)}return f}function mg(a,b,c,d,e){d=va(d);
d.shared=!1;var f=[yb(a,b,c,d,e)],g=f[0],h=d.widgetNode;fb(a,function(k){h&&(d.widgetNode=h.cloneNode(!0));f.push(yb(k,G(k,b),G(k,c),d,e));for(var l=0;l<k.linked.length;++l)if(k.linked[l].isParent)return;g=R(f)});return new Tc(f,g)}function hf(a){return a.findMarks(t(a.first,0),a.clipPos(t(a.lastLine())),function(b){return b.parent})}function ng(a){for(var b=0;b<a.length;b++){var c=a[b],d=[c.primary.doc];fb(c.primary.doc,function(g){d.push(g)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];
-1==ja(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}}}function Sc(a,b,c){this.marker=a;this.from=b;this.to=c}function $b(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function Id(a,b){if(b.full)return null;var c=Sb(a,b.from.line)&&z(a,b.from.line).markedSpans,d=Sb(a,b.to.line)&&z(a,b.to.line).markedSpans;if(!c&&!d)return null;a=b.from.ch;var e=b.to.ch,f=0==I(b.from,b.to);if(c)for(var g=0,h;g<c.length;++g){var k=c[g],l=k.marker;if(null==k.from||(l.inclusiveLeft?k.from<=
a:k.from<a)||!(k.from!=a||"bookmark"!=l.type||f&&k.marker.insertLeft)){var m=null==k.to||(l.inclusiveRight?k.to>=a:k.to>a);(h||(h=[])).push(new Sc(l,k.from,m?null:k.to))}}c=h;var p;if(d)for(h=0;h<d.length;++h)if(g=d[h],k=g.marker,null==g.to||(k.inclusiveRight?g.to>=e:g.to>e)||g.from==e&&"bookmark"==k.type&&(!f||g.marker.insertLeft))l=null==g.from||(k.inclusiveLeft?g.from<=e:g.from<e),(p||(p=[])).push(new Sc(k,l?null:g.from-e,null==g.to?null:g.to-e));e=1==b.text.length;f=R(b.text).length+(e?a:0);if(c)for(d=
0;d<c.length;++d)if(h=c[d],null==h.to)(g=$b(p,h.marker),g)?e&&(h.to=null==g.to?null:g.to+f):h.to=a;if(p)for(d=0;d<p.length;++d)h=p[d],null!=h.to&&(h.to+=f),null==h.from?(g=$b(c,h.marker),g||(h.from=f,e&&(c||(c=[])).push(h))):(h.from+=f,e&&(c||(c=[])).push(h));c&&(c=jf(c));p&&p!=c&&(p=jf(p));a=[c];if(!e){b=b.text.length-2;var n;if(0<b&&c)for(d=0;d<c.length;++d)null==c[d].to&&(n||(n=[])).push(new Sc(c[d].marker,null,null));for(d=0;d<b;++d)a.push(n);a.push(p)}return a}function jf(a){for(var b=0;b<a.length;++b){var c=
a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function af(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push(og(c[d]));c=e}else c=null;a=Id(a,b);if(!c)return a;if(!a)return c;for(b=0;b<c.length;++b)if(d=c[b],e=a[b],d&&e){var f=0;a:for(;f<e.length;++f){for(var g=e[f],h=0;h<d.length;++h)if(d[h].marker==g.marker)continue a;d.push(g)}}else e&&(c[b]=e);return c}function jg(a,b,c){var d=null;a.iter(b.line,c.line+1,function(m){if(m.markedSpans)for(var p=
0;p<m.markedSpans.length;++p){var n=m.markedSpans[p].marker;!n.readOnly||d&&-1!=ja(d,n)||(d||(d=[])).push(n)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(0),f=0;f<a.length;++f){var g=a[f];if(!(0>I(g.to,e.from)||0<I(g.from,e.to))){var h=[f,1],k=I(g.from,e.from),l=I(g.to,e.to);(0>k||!c.inclusiveLeft&&!k)&&h.push({from:g.from,to:e.from});(0<l||!c.inclusiveRight&&!l)&&h.push({from:e.to,to:g.to});a.splice.apply(a,h);f+=h.length-1}}}return a}function kf(a){var b=
a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function lf(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function mf(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;c=a.find();var d=b.find(),e=I(c.from,d.from)||(a.inclusiveLeft?-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=I(c.to,d.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}function Za(a,b){a=Sa&&a.markedSpans;if(a)for(var c,d=0;d<a.length;++d)if(c=
a[d],c.marker.collapsed&&null==(b?c.from:c.to)&&(!e||0>mf(e,c.marker)))var e=c.marker;return e}function gf(a,b,c,d,e){a=z(a,b);if(a=Sa&&a.markedSpans)for(b=0;b<a.length;++b){var f=a[b];if(f.marker.collapsed){var g=f.marker.find(0),h=I(g.from,c)||(f.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),k=I(g.to,d)||(f.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=h&&0>=k||0>=h&&0<=k)&&(0>=h&&(0<I(g.to,c)||f.marker.inclusiveRight&&e.inclusiveLeft)||0<=h&&(0>I(g.from,d)||f.marker.inclusiveLeft&&
e.inclusiveRight)))return!0}}}function Ha(a){for(var b;b=Za(a,!0);)a=b.find(-1,!0).line;return a}function fd(a,b){a=z(a,b);var c=Ha(a);return a==c?b:S(c)}function $d(a,b){if(b>a.lastLine())return b;var c=z(a,b);if(!Xa(a,c))return b;for(;a=Za(c,!1);)c=a.find(1,!0).line;return S(c)+1}function Xa(a,b){var c=Sa&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&Nd(a,b,d)))return!0}function Nd(a,b,c){if(null==
c.to)return b=c.marker.find(1,!0),Nd(a,b.line,$b(b.line.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&!d.marker.widgetNode&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&Nd(a,b,d))return!0}function Wb(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;if(!od(document.body,a.node)){var c="position: relative;";a.coverGutter&&
(c+="margin-left: -"+b.display.gutters.offsetWidth+"px;");a.noHScroll&&(c+="width: "+b.display.wrapper.clientWidth+"px;");ua(b.display.measure,y("div",[a.node],null,c))}return a.height=a.node.offsetHeight}function pg(a,b,c,d){var e=new Uc(a,c,d),f=a.cm;f&&e.noHScroll&&(f.display.alignWidgets=!0);Pc(a,b,"widget",function(g){var h=g.widgets||(g.widgets=[]);null==e.insertAt?h.push(e):h.splice(Math.min(h.length-1,Math.max(0,e.insertAt)),0,e);e.line=g;f&&!Xa(a,g)&&(h=Da(g)<a.scrollTop,Ba(g,g.height+Wb(e)),
h&&Nc(f,null,e.height),f.curOp.forceUpdate=!0);return!0});return e}function nf(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:(new RegExp("(?:^|s)"+c[2]+"(?:$|s)")).test(b[d])||(b[d]+=" "+c[2])}return a}function of(a,b){if(a.blankLine)return a.blankLine(b);if(a.innerMode&&(a=q.innerMode(a,b),a.mode.blankLine))return a.mode.blankLine(a.state)}function Od(a,b,c,d){for(var e=
0;10>e;e++){d&&(d[0]=q.innerMode(a,c).mode);var f=a.token(b,c);if(b.pos>b.start)return f}throw Error("Mode "+a.name+" failed to advance stream.");}function pf(a,b,c,d){function e(n){return{start:l.start,end:l.pos,string:l.current(),type:p||null,state:n?sb(f.mode,k):k}}var f=a.doc,g=f.mode;b=G(f,b);var h=z(f,b.line),k=Ub(a,b.line,c),l=new Vc(h.text,a.options.tabSize),m;for(d&&(m=[]);(d||l.pos<b.ch)&&!l.eol();){l.start=l.pos;var p=Od(g,l,k);d&&m.push(e(!0))}return d?m:e()}function qf(a,b,c,d,e,f,g){var h=
c.flattenSpans;null==h&&(h=a.options.flattenSpans);var k=0,l=null,m=new Vc(b,a.options.tabSize),p=a.options.addModeClass&&[null];for(""==b&&nf(of(c,d),f);!m.eol();){if(m.pos>a.options.maxHighlightLength){h=!1;g&&rd(a,b,d,m.pos);m.pos=b.length;var n=null}else n=nf(Od(c,m,d,p),f);if(p){var r=p[0].name;r&&(n="m-"+(n?r+" "+n:r))}if(!h||l!=n){for(;k<m.start;)k=Math.min(m.start,k+5E4),e(k,l);l=n}m.start=m.pos}for(;k<m.pos;)a=Math.min(m.pos,k+5E4),e(a,l),k=a}function Ae(a,b,c,d){var e=[a.state.modeGen],
f={};qf(a,b.text,a.doc.mode,c,function(l,m){e.push(l,m)},f,d);for(c=0;c<a.state.overlays.length;++c){var g=a.state.overlays[c],h=1,k=0;qf(a,b.text,g.mode,!0,function(l,m){for(var p=h;k<l;){var n=e[h];n>l&&e.splice(h,1,l,e[h+1],n);h+=2;k=Math.min(l,n)}if(m)if(g.opaque)e.splice(p,h-p,l,"cm-overlay "+m),h=p+2;else for(;p<h;p+=2)l=e[p+1],e[p+1]=(l?l+" ":"")+"cm-overlay "+m},f)}return{styles:e,classes:f.bgClass||f.textClass?f:null}}function rf(a,b,c){if(!b.styles||b.styles[0]!=a.state.modeGen){var d=Ae(a,
b,b.stateAfter=Ub(a,S(b)));b.styles=d.styles;d.classes?b.styleClasses=d.classes:b.styleClasses&&(b.styleClasses=null);c===a.doc.frontier&&a.doc.frontier++}return b.styles}function rd(a,b,c,d){var e=a.doc.mode,f=new Vc(b,a.options.tabSize);f.start=f.pos=d||0;for(""==b&&of(e,c);!f.eol()&&f.pos<=a.options.maxHighlightLength;)Od(e,f,c),f.start=f.pos}function sf(a,b){if(!a||/^\s*$/.test(a))return null;b=b.addModeClass?qg:rg;return b[a]||(b[a]=a.replace(/\S+/g,"cm-$&"))}function ge(a,b){var c=y("span",
null,null,da?"padding-right: .1px":null);c={pre:y("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:a,splitSpaces:(P||da)&&a.getOption("lineWrapping")};b.measure={};for(var d=0;d<=(b.rest?b.rest.length:0);d++){var e=d?b.rest[d-1]:b.line,f;c.pos=0;c.addToken=sg;if(null!=Pd)var g=Pd;else{g=ua(a.display.measure,document.createTextNode("A\u062eA"));var h=tb(g,0,1).getBoundingClientRect();g=h&&h.left!=h.right?Pd=3>tb(g,1,2).getBoundingClientRect().right-h.right:!1}g&&(f=xa(e))&&(c.addToken=tg(c.addToken,
f));c.map=[];var k=b!=a.display.externalMeasured&&S(e);a:{var l=h=g=void 0,m=void 0,p=void 0,n=void 0,r=void 0,v=c;k=rf(a,e,k);var x=e.markedSpans,X=e.text,V=0;if(x){var aa=X.length,Q=0;Oa=1;for(var C="",N=0;;){if(N==Q){p=m=l=h=n="";g=null;N=Infinity;for(var L=[],W=0;W<x.length;++W){var D=x[W],Z=D.marker;"bookmark"==Z.type&&D.from==Q&&Z.widgetNode?L.push(Z):D.from<=Q&&(null==D.to||D.to>Q||Z.collapsed&&D.to==Q&&D.from==Q)?(null!=D.to&&D.to!=Q&&N>D.to&&(N=D.to,m=""),Z.className&&(p+=" "+Z.className),
Z.css&&(n=Z.css),Z.startStyle&&D.from==Q&&(l+=" "+Z.startStyle),Z.endStyle&&D.to==N&&(m+=" "+Z.endStyle),Z.title&&!h&&(h=Z.title),Z.collapsed&&(!g||0>mf(g.marker,Z))&&(g=D)):D.from>Q&&N>D.from&&(N=D.from)}if(g&&(g.from||0)==Q){tf(v,(null==g.to?aa+1:g.to)-Q,g.marker,null==g.from);if(null==g.to)break a;g.to==Q&&(g=!1)}if(!g&&L.length)for(W=0;W<L.length;++W)tf(v,0,L[W])}if(Q>=aa)break;for(L=Math.min(aa,N);;){if(C){W=Q+C.length;g||(D=W>L?C.slice(0,L-Q):C,v.addToken(v,D,r?r+p:p,l,Q+D.length==N?m:"",h,
n));if(W>=L){C=C.slice(L-Q);Q=L;break}Q=W;l=""}C=X.slice(V,V=k[Oa++]);r=sf(k[Oa++],v.cm.options)}}}else for(var Oa=1;Oa<k.length;Oa+=2)v.addToken(v,X.slice(V,V=k[Oa]),sf(k[Oa+1],v.cm.options))}e.styleClasses&&(e.styleClasses.bgClass&&(c.bgClass=Qd(e.styleClasses.bgClass,c.bgClass||"")),e.styleClasses.textClass&&(c.textClass=Qd(e.styleClasses.textClass,c.textClass||"")));0==c.map.length&&c.map.push(0,0,c.content.appendChild(ug(a.display.measure)));0==d?(b.measure.map=c.map,b.measure.cache={}):((b.measure.maps||
(b.measure.maps=[])).push(c.map),(b.measure.caches||(b.measure.caches=[])).push({}))}da&&/\bcm-tab\b/.test(c.content.lastChild.className)&&(c.content.className="cm-tab-wrap-hack");ca(a,"renderLine",a,b.line,c.pre);c.pre.className&&(c.textClass=Qd(c.pre.className,c.textClass||""));return c}function sg(a,b,c,d,e,f,g){if(b){var h=a.splitSpaces?b.replace(/ {3,}/g,vg):b,k=a.cm.state.specialChars,l=!1;if(k.test(b)){v=document.createDocumentFragment();for(var m=0;;){k.lastIndex=m;var p=k.exec(b),n=p?p.index-
m:b.length-m;if(n){var r=document.createTextNode(h.slice(m,m+n));P&&9>U?v.appendChild(y("span",[r])):v.appendChild(r);a.map.push(a.pos,a.pos+n,r);a.col+=n;a.pos+=n}if(!p)break;m+=n+1;"\t"==p[0]?(r=a.cm.options.tabSize,p=r-a.col%r,r=v.appendChild(y("span",df(p),"cm-tab")),r.setAttribute("role","presentation"),r.setAttribute("cm-text","\t"),a.col+=p):("\r"==p[0]||"\n"==p[0]?(r=v.appendChild(y("span","\r"==p[0]?"\u240d":"\u2424","cm-invalidchar")),r.setAttribute("cm-text",p[0])):(r=a.cm.options.specialCharPlaceholder(p[0]),
r.setAttribute("cm-text",p[0]),P&&9>U?v.appendChild(y("span",[r])):v.appendChild(r)),a.col+=1);a.map.push(a.pos,a.pos+1,r);a.pos++}}else{a.col+=b.length;var v=document.createTextNode(h);a.map.push(a.pos,a.pos+b.length,v);P&&9>U&&(l=!0);a.pos+=b.length}if(c||d||e||l||g)return b=c||"",d&&(b+=d),e&&(b+=e),d=y("span",[v],b,g),f&&(d.title=f),a.content.appendChild(d);a.content.appendChild(v)}}function vg(a){for(var b=" ",c=0;c<a.length-2;++c)b+=c%2?" ":"\u00a0";return b+" "}function tg(a,b){return function(c,
d,e,f,g,h,k){e=e?e+" cm-force-border":"cm-force-border";for(var l=c.pos,m=l+d.length;;){for(var p=0;p<b.length;p++){var n=b[p];if(n.to>l&&n.from<=l)break}if(n.to>=m)return a(c,d,e,f,g,h,k);a(c,d.slice(0,n.to-l),e,f,null,h,k);f=null;d=d.slice(n.to-l);l=n.to}}}function tf(a,b,c,d){var e=!d&&c.widgetNode;e&&a.map.push(a.pos,a.pos+b,e);!d&&a.cm.display.input.needsContentAttribute&&(e||(e=a.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",c.id));e&&(a.cm.display.input.setUneditable(e),
a.content.appendChild(e));a.pos+=b}function cf(a,b){return 0==b.from.ch&&0==b.to.ch&&""==R(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function Kd(a,b,c,d){function e(x,X,V){x.text=X;x.stateAfter&&(x.stateAfter=null);x.styles&&(x.styles=null);null!=x.order&&(x.order=null);kf(x);lf(x,V);X=d?d(x):1;X!=x.height&&Ba(x,X);ka(x,"change",x,b)}function f(x,X){for(var V=[];x<X;++x)V.push(new ac(k[x],c?c[x]:null,d));return V}var g=b.from,h=b.to,k=b.text,l=z(a,g.line),m=z(a,h.line),p=R(k),n=c?c[k.length-
1]:null,r=h.line-g.line;if(b.full)a.insert(0,f(0,k.length)),a.remove(k.length,a.size-k.length);else if(cf(a,b)){var v=f(0,k.length-1);e(m,m.text,n);r&&a.remove(g.line,r);v.length&&a.insert(g.line,v)}else l==m?1==k.length?e(l,l.text.slice(0,g.ch)+p+l.text.slice(h.ch),n):(v=f(1,k.length-1),v.push(new ac(p+l.text.slice(h.ch),n,d)),e(l,l.text.slice(0,g.ch)+k[0],c?c[0]:null),a.insert(g.line+1,v)):1==k.length?(e(l,l.text.slice(0,g.ch)+k[0]+m.text.slice(h.ch),c?c[0]:null),a.remove(g.line+1,r)):(e(l,l.text.slice(0,
g.ch)+k[0],c?c[0]:null),e(m,p+m.text.slice(h.ch),n),v=f(1,k.length-1),1<r&&a.remove(g.line+1,r-1),a.insert(g.line+1,v));ka(a,"change",a,b)}function bc(a){this.lines=a;this.parent=null;for(var b=0,c=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function cc(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d];b+=e.chunkSize();c+=e.height;e.parent=this}this.size=b;this.height=c;this.parent=null}function fb(a,b,c){function d(e,f,g){if(e.linked)for(var h=0;h<e.linked.length;++h){var k=
e.linked[h];if(k.doc!=f){var l=g&&k.sharedHist;if(!c||l)b(k.doc,l),d(k.doc,e,l)}}}d(a,null,!0)}function Vd(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b;b.cm=a;K(a);B(a);a.options.lineWrapping||mb(a);a.options.mode=b.modeOption;oa(a)}function z(a,b){b-=a.first;if(0>b||b>=a.size)throw Error("There is no line "+(b+a.first)+" in the document.");for(;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function cb(a,b,c){var d=
[],e=b.line;a.iter(b.line,c.line+1,function(f){f=f.text;e==c.line&&(f=f.slice(0,c.ch));e==b.line&&(f=f.slice(b.ch));d.push(f);++e});return d}function Rd(a,b,c){var d=[];a.iter(b,c,function(e){d.push(e.text)});return d}function Ba(a,b){if(b-=a.height)for(;a;a=a.parent)a.height+=b}function S(a){if(null==a.parent)return null;var b=a.parent;a=ja(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function ab(a,b){var c=a.first;
a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(b<f){a=e;continue a}b-=f;c+=e.chunkSize()}return c}while(!a.lines);for(d=0;d<a.lines.length;++d){e=a.lines[d].height;if(b<e)break;b-=e}return c+d}function Da(a){a=Ha(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;else b+=e.height}for(a=c.parent;a;c=a,a=c.parent)for(d=0;d<a.children.length&&(e=a.children[d],e!=c);++d)b+=e.height;return b}function xa(a){var b=a.order;null==b&&(b=a.order=wg(a.text));
return b}function Wc(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function Jd(a,b){var c={from:kd(b.from),to:eb(b),text:cb(a,b.from,b.to)};uf(a,c,b.from.line,b.to.line+1);fb(a,function(d){uf(d,c,b.from.line,b.to.line+1)},!0);return c}function te(a){for(;a.length;)if(R(a).ranges)a.pop();else break}function Ze(a,b,c,d){var e=a.history;e.undone.length=
0;var f=+new Date,g;if(g=e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0))){if(e.lastOp==d){te(e.done);var h=R(e.done)}else e.done.length&&!R(e.done).ranges?h=R(e.done):1<e.done.length&&!e.done[e.done.length-2].ranges?(e.done.pop(),h=R(e.done)):h=void 0;g=h}if(g){var k=R(h.changes);0==I(b.from,b.to)&&0==I(b.from,k.to)?k.to=eb(b):h.changes.push(Jd(a,b))}else for((h=R(e.done))&&h.ranges||wc(a.sel,e.done),
h={changes:[Jd(a,b)],generation:e.generation},e.done.push(h);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift();e.done.push(c);e.generation=++e.maxGeneration;e.lastModTime=e.lastSelTime=f;e.lastOp=e.lastSelOp=d;e.lastOrigin=e.lastSelOrigin=b.origin;k||ca(a,"historyAdded")}function wc(a,b){var c=R(b);c&&c.ranges&&c.equals(a)||b.push(a)}function uf(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(g){g.markedSpans&&((e||(e=b["spans_"+
a.id]={}))[f]=g.markedSpans);++f})}function og(a){if(!a)return null;for(var b=0,c;b<a.length;++b)a[b].marker.explicitlyCleared?c||(c=a.slice(0,b)):c&&c.push(a[b]);return c?c.length?c:null:a}function zb(a,b,c){for(var d=0,e=[];d<a.length;++d){var f=a[d];if(f.ranges)e.push(c?Ka.prototype.deepCopy.call(f):f);else{f=f.changes;var g=[];e.push({changes:g});for(var h=0;h<f.length;++h){var k=f[h],l;g.push({from:k.from,to:k.to,text:k.text});if(b)for(var m in k)(l=m.match(/^spans_(\d+)$/))&&-1<ja(b,Number(l[1]))&&
(R(g)[m]=k[m],delete k[m])}}}return e}function vf(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function wf(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var h=0;h<f.ranges.length;h++)vf(f.ranges[h].anchor,b,c,d),vf(f.ranges[h].head,b,c,d)}else{for(h=0;h<f.changes.length;++h){var k=f.changes[h];if(c<k.from.line)k.from=t(k.from.line+d,k.from.ch),k.to=t(k.to.line+d,k.to.ch);else if(b<=k.to.line){g=!1;break}}g||(a.splice(0,
e+1),e=0)}}}function $e(a,b){var c=b.from.line,d=b.to.line;b=b.text.length-(d-c)-1;wf(a.done,c,d,b);wf(a.undone,c,d,b)}function Fd(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function Oe(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));wa&&a.ctrlKey&&1==b&&(b=3);return b}function ka(a,b){function c(h){return function(){h.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2);if(ub)var f=ub.delayedCallbacks;
else dc?f=dc:(f=dc=[],setTimeout(xg,0));for(var g=0;g<d.length;++g)f.push(c(d[g]))}}function xg(){var a=dc;dc=null;for(var b=0;b<a.length;++b)a[b]()}function Ia(a,b,c){"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}});ca(a,c||b.type,a,b);return Fd(b)||b.codemirrorIgnore}function we(a){var b=a._handlers&&a._handlers.cursorActivity;if(b){a=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var c=0;c<b.length;++c)-1==ja(a,b[c])&&a.push(b[c])}}function ta(a,
b){return(a=a._handlers&&a._handlers[b])&&0<a.length}function Ab(a){a.prototype.on=function(b,c){A(this,b,c)};a.prototype.off=function(b,c){Ja(this,b,c)}}function Eb(){this.id=null}function Pe(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("\t",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);e+=f-d;e+=c-e%c;d=f+1;if(e>=b)return d}}function df(a){for(;Xc.length<=a;)Xc.push(R(Xc)+" ");return Xc[a]}function R(a){return a[a.length-1]}function ja(a,b){for(var c=0;c<a.length;++c)if(a[c]==
b)return c;return-1}function rc(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function ec(){}function xf(a,b){Object.create?a=Object.create(a):(ec.prototype=a,a=new ec);b&&va(b,a);return a}function va(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function Fb(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Qc(a,b){return b?-1<b.source.indexOf("\\w")&&yf(a)?!0:b.test(a):yf(a)}
function zf(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function Vb(a){return 768<=a.charCodeAt(0)&&yg.test(a)}function y(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)a.appendChild(document.createTextNode(b));else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function Ya(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function ua(a,b){return Ya(a).appendChild(b)}function Ea(){for(var a=
document.activeElement;a&&a.root&&a.root.activeElement;)a=a.root.activeElement;return a}function fc(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function Qd(a,b){a=a.split(" ");for(var c=0;c<a.length;c++)a[c]&&!fc(a[c]).test(b)&&(b+=" "+a[c]);return b}function Af(a){if(document.body.getElementsByClassName)for(var b=document.body.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function Jf(){var a;A(window,"resize",function(){null==a&&(a=setTimeout(function(){a=
null;Af(Yf)},100))});A(window,"blur",function(){Af(Gb)})}function ug(a){if(null==Sd){var b=y("span","\u200b");ua(a,y("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(Sd=1>=b.offsetWidth&&2<b.offsetHeight&&!(P&&8>U))}a=Sd?y("span","\u200b"):y("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");a.setAttribute("cm-text","");return a}function Qf(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=a[f];if(g.from<c&&g.to>b||b==c&&g.to==
b)d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0}e||d(b,c,"ltr")}function wd(a){return a.level%2?a.to:a.from}function xd(a){return a.level%2?a.from:a.to}function Bc(a){return(a=xa(a))?wd(a[0]):0}function Cc(a){var b=xa(a);return b?xd(R(b)):a.text.length}function Bf(a,b){var c=z(a.doc,b);a=Ha(c);a!=c&&(b=S(a));a=(c=xa(a))?c[0].level%2?Cc(a):Bc(a):0;return t(b,a)}function Cf(a,b){var c=Bf(a,b.line);a=z(a.doc,c.line);var d=xa(a);return d&&0!=d[0].level?c:(a=Math.max(0,a.text.search(/\S/)),
t(c.line,b.line==c.line&&b.ch<=a&&b.ch?0:a))}function sc(a,b){Xb=null;for(var c=0,d;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b)return c;if(e.from==b||e.to==b)if(null==d)d=c;else{b=e.level;var f=a[d].level;a=a[0].level;a=b==a?!0:f==a?!1:b<f;if(a)return e.from!=e.to&&(Xb=d),c;e.from!=e.to&&(Xb=c);break}}return d}function Td(a,b,c,d){if(!d)return b+c;do b+=c;while(0<b&&Vb(a.text.charAt(b)));return b}function zd(a,b,c,d){var e=xa(a);if(!e)return ef(a,b,c,d);var f=sc(e,b),g=e[f];for(b=Td(a,b,g.level%
2?-c:c,d);;){if(b>g.from&&b<g.to)return b;if(b==g.from||b==g.to){if(sc(e,b)==f)return b;g=e[f+c];return 0<c==g.level%2?g.to:g.from}g=e[f+=c];if(!g)return null;b=0<c==g.level%2?Td(a,g.to,-1,d):Td(a,g.from,1,d)}}function ef(a,b,c,d){b+=c;if(d)for(;0<b&&Vb(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var Va=/gecko\/\d/i.test(navigator.userAgent),Df=/MSIE \d/.test(navigator.userAgent),Ef=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),P=Df||Ef,U=P&&(Df?document.documentMode||
6:Ef[1]),da=/WebKit\//.test(navigator.userAgent),zg=da&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Ag=/Chrome\//.test(navigator.userAgent),Aa=/Opera\//.test(navigator.userAgent),Ke=/Apple Computer/.test(navigator.vendor),Bg=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Wf=/PhantomJS/.test(navigator.userAgent),qb=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Db=qb||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),wa=qb||
/Mac/.test(navigator.platform),Cg=/win/i.test(navigator.platform),hb=Aa&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);hb&&(hb=Number(hb[1]));hb&&15<=hb&&(Aa=!1,da=!0);var Ff=wa&&(zg||Aa&&(null==hb||12.11>hb)),Bd=Va||P&&9<=U,Xe=!1,Sa=!1;Lb.prototype=va({update:function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;c?(this.vert.style.display="block",this.vert.style.bottom=b?d+"px":"0",this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+
(a.viewHeight-(b?d:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0");b?(this.horiz.style.display="block",this.horiz.style.right=c?d+"px":"0",this.horiz.style.left=a.barLeft+"px",this.horiz.firstChild.style.width=a.scrollWidth-a.clientWidth+(a.viewWidth-a.barLeft-(c?d:0))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");!this.checkedOverlay&&0<a.clientHeight&&(0==d&&this.overlayHack(),this.checkedOverlay=!0);return{right:c?d:0,bottom:b?d:0}},setScrollLeft:function(a){this.horiz.scrollLeft!=
a&&(this.horiz.scrollLeft=a)},setScrollTop:function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a)},overlayHack:function(){this.horiz.style.minHeight=this.vert.style.minWidth=wa&&!Bg?"12px":"18px";var a=this,b=function(c){(c.target||c.srcElement)!=a.vert&&(c.target||c.srcElement)!=a.horiz&&ba(a.cm,Ge)(c)};A(this.vert,"mousedown",b);A(this.horiz,"mousedown",b)},clear:function(){var a=this.horiz.parentNode;a.removeChild(this.horiz);a.removeChild(this.vert)}},Lb.prototype);w.prototype=va({update:function(){return{bottom:0,
right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},w.prototype);q.scrollbarModel={"native":Lb,"null":w};lc.prototype.signal=function(a,b){ta(a,b)&&this.events.push(arguments)};lc.prototype.finish=function(){for(var a=0;a<this.events.length;a++)ca.apply(null,this.events[a])};var t=q.Pos=function(a,b){if(!(this instanceof t))return new t(a,b);this.line=a;this.ch=b},I=q.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch},sa=null;ld.prototype=va({init:function(a){function b(g){if(d.somethingSelected())sa=
d.getSelections(),c.inaccurateSelection&&(c.prevInput="",c.inaccurateSelection=!1,f.value=sa.join("\n"),Bb(f));else if(d.options.lineWiseCopyCut){var h=le(d);sa=h.text;"cut"==g.type?d.setSelections(h.ranges,null,Ga):(c.prevInput="",f.value=h.text.join("\n"),Bb(f))}else return;"cut"==g.type&&(d.state.cutIncoming=!0)}var c=this,d=this.cm,e=this.wrapper=ne(),f=this.textarea=e.firstChild;a.wrapper.insertBefore(e,a.wrapper.firstChild);qb&&(f.style.width="0px");A(f,"input",function(){P&&9<=U&&c.hasSelection&&
(c.hasSelection=null);c.poll()});A(f,"paste",function(g){if(ke(g,d))return!0;d.state.pasteIncoming=!0;c.fastPoll()});A(f,"cut",b);A(f,"copy",b);A(a.scroller,"paste",function(g){Na(a,g)||(d.state.pasteIncoming=!0,c.focus())});A(a.lineSpace,"selectstart",function(g){Na(a,g)||ma(g)});A(f,"compositionstart",function(){var g=d.getCursor("from");c.composing={start:g,range:d.markText(g,d.getCursor("to"),{className:"CodeMirror-composing"})}});A(f,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),
c.composing=null)})},prepareSelection:function(){var a=this.cm,b=a.display,c=a.doc,d=ye(a);if(a.options.moveInputWithCursor){a=La(a,c.sel.primary().head,"div");c=b.wrapper.getBoundingClientRect();var e=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+e.top-c.top));d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+e.left-c.left))}return d},showSelection:function(a){var b=this.cm.display;ua(b.cursorDiv,a.cursors);ua(b.selectionDiv,a.selection);
null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},reset:function(a){if(!this.contextMenuPending){var b=this.cm,c=b.doc;if(b.somethingSelected()){this.prevInput="";var d=c.sel.primary();var e=(d=Te&&(100<d.to().line-d.from().line||1E3<(e=b.getSelection()).length))?"-":e||b.getSelection();this.textarea.value=e;b.state.focused&&Bb(this.textarea);P&&9<=U&&(this.hasSelection=e)}else a||(this.prevInput=this.textarea.value="",P&&9<=U&&(this.hasSelection=null));this.inaccurateSelection=
d}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!Db||Ea()!=this.textarea))try{this.textarea.focus()}catch(a){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var a=this;a.pollingFast||a.polling.set(this.cm.options.pollInterval,function(){a.poll();a.cm.state.focused&&a.slowPoll()})},
fastPoll:function(){function a(){c.poll()||b?(c.pollingFast=!1,c.slowPoll()):(b=!0,c.polling.set(60,a))}var b=!1,c=this;c.pollingFast=!0;c.polling.set(20,a)},poll:function(){var a=this.cm,b=this.textarea,c=this.prevInput;if(this.contextMenuPending||!a.state.focused||Dg(b)&&!c&&!this.composing||pc(a)||a.options.disableInput||a.state.keySeq)return!1;var d=b.value;if(d==c&&!a.somethingSelected())return!1;if(P&&9<=U&&this.hasSelection===d||wa&&/[\uf700-\uf7ff]/.test(d))return a.display.input.reset(),
!1;if(a.doc.sel==a.display.selForContextMenu){var e=d.charCodeAt(0);8203!=e||c||(c="\u200b");if(8666==e)return this.reset(),this.cm.execCommand("undo")}var f=0;for(e=Math.min(c.length,d.length);f<e&&c.charCodeAt(f)==d.charCodeAt(f);)++f;var g=this;qa(a,function(){qc(a,d.slice(f),c.length-f,null,g.composing?"*compose":null);1E3<d.length||-1<d.indexOf("\n")?b.value=g.prevInput="":g.prevInput=d;g.composing&&(g.composing.range.clear(),g.composing.range=a.markText(g.composing.start,a.getCursor("to"),{className:"CodeMirror-composing"}))});
return!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){P&&9<=U&&(this.hasSelection=null);this.fastPoll()},onContextMenu:function(a){function b(){if(null!=g.selectionStart){var n=e.somethingSelected(),r="\u200b"+(n?g.value:"");g.value="\u21da";g.value=r;d.prevInput=n?"":"\u200b";g.selectionStart=1;g.selectionEnd=r.length;f.selForContextMenu=e.doc.sel}}function c(){d.contextMenuPending=!1;d.wrapper.style.position="relative";g.style.cssText=l;P&&
9>U&&f.scrollbars.setScrollTop(f.scroller.scrollTop=k);if(null!=g.selectionStart){(!P||P&&9>U)&&b();var n=0,r=function(){f.selForContextMenu==e.doc.sel&&0==g.selectionStart&&0<g.selectionEnd&&"\u200b"==d.prevInput?ba(e,Kc.selectAll)(e):10>n++?f.detectingSelectAll=setTimeout(r,500):f.input.reset()};f.detectingSelectAll=setTimeout(r,200)}}var d=this,e=d.cm,f=e.display,g=d.textarea,h=vb(e,a),k=f.scroller.scrollTop;if(h&&!Aa){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(h)&&ba(e,ea)(e.doc,
Fa(h),Ga);var l=g.style.cssText;d.wrapper.style.position="absolute";g.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: "+(P?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(da)var m=window.scrollY;f.input.focus();da&&window.scrollTo(null,m);f.input.reset();e.somethingSelected()||(g.value=d.prevInput=" ");
d.contextMenuPending=!0;f.selForContextMenu=e.doc.sel;clearTimeout(f.detectingSelectAll);P&&9<=U&&b();if(Bd){Cd(a);var p=function(){Ja(window,"mouseup",p);setTimeout(c,20)};A(window,"mouseup",p)}else setTimeout(c,50)}},setUneditable:ec,needsContentAttribute:!1},ld.prototype);md.prototype=va({init:function(a){function b(e){if(d.somethingSelected())sa=d.getSelections(),"cut"==e.type&&d.replaceSelection("",null,"cut");else if(d.options.lineWiseCopyCut){var f=le(d);sa=f.text;"cut"==e.type&&d.operation(function(){d.setSelections(f.ranges,
0,Ga);d.replaceSelection("",null,"cut")})}else return;if(e.clipboardData&&!qb)e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",sa.join("\n"));else{var g=ne();e=g.firstChild;d.display.lineSpace.insertBefore(g,d.display.lineSpace.firstChild);e.value=sa.join("\n");var h=document.activeElement;Bb(e);setTimeout(function(){d.display.lineSpace.removeChild(g);h.focus()},50)}}var c=this,d=c.cm;a=c.div=a.lineDiv;a.contentEditable="true";me(a);A(a,"paste",function(e){ke(e,
d)});A(a,"compositionstart",function(e){e=e.data;c.composing={sel:d.doc.sel,data:e,startData:e};if(e){var f=d.doc.sel.primary(),g=d.getLine(f.head.line).indexOf(e,Math.max(0,f.head.ch-e.length));-1<g&&g<=f.head.ch&&(c.composing.sel=Fa(t(f.head.line,g),t(f.head.line,g+e.length)))}});A(a,"compositionupdate",function(e){c.composing.data=e.data});A(a,"compositionend",function(e){var f=c.composing;f&&(e.data==f.startData||/\u200b/.test(e.data)||(f.data=e.data),setTimeout(function(){f.handled||c.applyComposition(f);
c.composing==f&&(c.composing=null)},50))});A(a,"touchstart",function(){c.forceCompositionEnd()});A(a,"input",function(){c.composing||c.pollContent()||qa(c.cm,function(){oa(d)})});A(a,"copy",b);A(a,"cut",b)},prepareSelection:function(){var a=ye(this.cm,!1);a.focus=this.cm.state.focused;return a},showSelection:function(a){a&&this.cm.display.view.length&&(a.focus&&this.showPrimarySelection(),this.showMultipleSelections(a))},showPrimarySelection:function(){var a=window.getSelection(),b=this.cm.doc.sel.primary(),
c=tc(this.cm,a.anchorNode,a.anchorOffset),d=tc(this.cm,a.focusNode,a.focusOffset);if(!c||c.bad||!d||d.bad||0!=I(oc(c,d),b.from())||0!=I(nc(c,d),b.to()))if(c=oe(this.cm,b.from()),d=oe(this.cm,b.to()),c||d){var e=this.cm.display.view;b=a.rangeCount&&a.getRangeAt(0);c?d||(d=e[e.length-1].measure,d=d.maps?d.maps[d.maps.length-1]:d.map,d={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}):c={node:e[0].measure.map[2],offset:0};try{var f=tb(c.node,c.offset,d.offset,d.node)}catch(g){}f&&(a.removeAllRanges(),
a.addRange(f),b&&null==a.anchorNode?a.addRange(b):Va&&this.startGracePeriod());this.rememberSelection()}},startGracePeriod:function(){var a=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){a.gracePeriod=!1;a.selectionChanged()&&a.cm.operation(function(){a.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(a){ua(this.cm.display.cursorDiv,a.cursors);ua(this.cm.display.selectionDiv,a.selection)},rememberSelection:function(){var a=window.getSelection();this.lastAnchorNode=
a.anchorNode;this.lastAnchorOffset=a.anchorOffset;this.lastFocusNode=a.focusNode;this.lastFocusOffset=a.focusOffset},selectionInEditor:function(){var a=window.getSelection();if(!a.rangeCount)return!1;a=a.getRangeAt(0).commonAncestorContainer;return od(this.div,a)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function a(){b.cm.state.focused&&
(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=this;this.selectionInEditor()?this.pollSelection():qa(this.cm,function(){b.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,a)},selectionChanged:function(){var a=window.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var a=
window.getSelection(),b=this.cm;this.rememberSelection();var c=tc(b,a.anchorNode,a.anchorOffset),d=tc(b,a.focusNode,a.focusOffset);c&&d&&qa(b,function(){ea(b.doc,Fa(c,d),Ga);if(c.bad||d.bad)b.curOp.selectionChanged=!0})}},pollContent:function(){var a=this.cm,b=a.display,c=a.doc.sel.primary(),d=c.from();c=c.to();if(d.line<b.viewFrom||c.line>b.viewTo-1)return!1;var e;d.line==b.viewFrom||0==(e=bb(a,d.line))?(d=S(b.view[0].line),e=b.view[0].node):(d=S(b.view[e].line),e=b.view[e-1].node.nextSibling);var f=
bb(a,c.line);f==b.view.length-1?(c=b.viewTo-1,b=b.lineDiv.lastChild):(c=S(b.view[f+1].line)-1,b=b.view[f+1].node.previousSibling);b=a.doc.splitLines(Nf(a,e,b,d,c));for(e=cb(a.doc,t(d,0),t(c,z(a.doc,c).text.length));1<b.length&&1<e.length;)if(R(b)==R(e))b.pop(),e.pop(),c--;else if(b[0]==e[0])b.shift(),e.shift(),d++;else break;var g=0;f=0;for(var h=b[0],k=e[0],l=Math.min(h.length,k.length);g<l&&h.charCodeAt(g)==k.charCodeAt(g);)++g;h=R(b);k=R(e);for(l=Math.min(h.length-(1==b.length?g:0),k.length-(1==
e.length?g:0));f<l&&h.charCodeAt(h.length-f-1)==k.charCodeAt(k.length-f-1);)++f;b[b.length-1]=h.slice(0,h.length-f);b[0]=b[0].slice(g);d=t(d,g);c=t(c,e.length?R(e).length-f:0);if(1<b.length||b[0]||I(d,c))return wb(a.doc,b,d,c,"+input"),!0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},
applyComposition:function(a){a.data&&a.data!=a.startData&&ba(this.cm,qc)(this.cm,a.data,0,a.sel)},setUneditable:function(a){a.setAttribute("contenteditable","false")},onKeyPress:function(a){a.preventDefault();ba(this.cm,qc)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0)},onContextMenu:ec,resetPosition:ec,needsContentAttribute:!0},md.prototype);q.inputStyles={textarea:ld,contenteditable:md};Ka.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(a){if(a==
this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(0!=I(c.anchor,d.anchor)||0!=I(c.head,d.head))return!1}return!0},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new T(kd(this.ranges[b].anchor),kd(this.ranges[b].head));return new Ka(a,this.primIndex)},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},contains:function(a,
b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(0<=I(b,d.from())&&0>=I(a,d.to()))return c}return-1}};T.prototype={from:function(){return oc(this.anchor,this.head)},to:function(){return nc(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var td={left:0,right:0,top:0,bottom:0},db,ub=null,Vf=0,Gc,Fc,Je=0,Ic=0,ra=null;P?ra=-.53:Va?ra=15:Ag?ra=-.7:Ke&&(ra=-1/3);var Qe=function(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;
null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(b=a.detail);null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta);return{x:b,y:c}};q.wheelEventPixels=function(a){a=Qe(a);a.x*=ra;a.y*=ra;return a};var fg=new Eb,Gd=null,eb=q.changeEnd=function(a){return a.text?t(a.from.line+a.text.length-1,R(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};q.prototype={constructor:q,focus:function(){window.focus();this.display.input.focus()},setOption:function(a,b){var c=this.options,d=
c[a];if(c[a]!=b||"mode"==a)c[a]=b,jb.hasOwnProperty(a)&&ba(this,jb[a])(this,b,d)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](Rc(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,1),!0},addOverlay:ha(function(a,b){var c=a.token?a:q.getMode(this.options,a);if(c.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:c,
modeSpec:a,opaque:b&&b.opaque});this.state.modeGen++;oa(this)}),removeOverlay:ha(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1);this.state.modeGen++;oa(this);break}}}),indentLine:ha(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");Sb(this.doc,a)&&Rb(this,a,b,c)}),indentSelection:ha(function(a){for(var b=this.doc.sel.ranges,c=-1,d=0;d<
b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(Rb(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&pb(this));else{var f=e.from();e=e.to();var g=Math.max(c,f.line);c=Math.min(this.lastLine(),e.line-(e.ch?0:1))+1;for(e=g;e<c;++e)Rb(this,e,a);e=this.doc.sel.ranges;0==f.ch&&b.length==e.length&&0<e[d].from().ch&&pd(this.doc,d,new T(f,e[d].to()),Ga)}}}),getTokenAt:function(a,b){return pf(this,a,b)},getLineTokens:function(a,b){return pf(this,t(a),b,!0)},getTokenTypeAt:function(a){a=
G(this.doc,a);var b=rf(this,z(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)b=b[2];else for(;;){var e=c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else if(b[2*e+1]<a)c=e+1;else{b=b[2*e+2];break}}c=b?b.indexOf("cm-overlay "):-1;return 0>c?b:0==c?null:b.slice(0,c-1)},getModeAt:function(a){var b=this.doc.mode;return b.innerMode?q.innerMode(b,this.getTokenAt(a).state).mode:b},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!Cb.hasOwnProperty(b))return c;var d=Cb[b];
a=this.getModeAt(a);if("string"==typeof a[b])d[a[b]]&&c.push(d[a[b]]);else if(a[b])for(var e=0;e<a[b].length;e++){var f=d[a[b][e]];f&&c.push(f)}else a.helperType&&d[a.helperType]?c.push(d[a.helperType]):d[a.name]&&c.push(d[a.name]);for(e=0;e<d._global.length;e++)b=d._global[e],b.pred(a,this)&&-1==ja(c,b.val)&&c.push(b.val);return c},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return Ub(this,a+1,b)},cursorCoords:function(a,b){var c=
this.doc.sel.primary();a=null==a?c.head:"object"==typeof a?G(this.doc,a):a?c.from():c.to();return La(this,a,b||"page")},charCoords:function(a,b){return yc(this,G(this.doc,a),b||"page")},coordsChar:function(a,b){a=Ee(this,a,b||"page");return yd(this,a.left,a.top)},lineAtHeight:function(a,b){a=Ee(this,{top:a,left:0},b||"page").top;return ab(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1;if("number"==typeof a){var d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:
a>d&&(a=d,c=!0);a=z(this.doc,a)}return vd(this,a,{top:0,left:0},b||"page").top+(c?this.doc.height-Da(a):0)},defaultTextHeight:function(){return Wa(this.display)},defaultCharWidth:function(){return Ib(this.display)},setGutterMarker:ha(function(a,b,c){return Pc(this.doc,a,"gutter",function(d){var e=d.gutterMarkers||(d.gutterMarkers={});e[b]=c;!c&&zf(e)&&(d.gutterMarkers=null);return!0})}),clearGutter:ha(function(a){var b=this,c=b.doc,d=c.first;c.iter(function(e){e.gutterMarkers&&e.gutterMarkers[a]&&
(e.gutterMarkers[a]=null,Ma(b,d,"gutter"),zf(e.gutterMarkers)&&(e.gutterMarkers=null));++d})}),lineInfo:function(a){if("number"==typeof a){if(!Sb(this.doc,a))return null;var b=a;a=z(this.doc,a);if(!a)return null}else if(b=S(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,
d,e){var f=this.display;a=La(this,G(this.doc,a));var g=a.bottom,h=a.left;b.style.position="absolute";b.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(b);f.sizer.appendChild(b);if("over"==d)g=a.top;else if("above"==d||"near"==d){var k=Math.max(f.wrapper.clientHeight,this.doc.height),l=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>k)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=k&&(g=a.bottom);h+b.offsetWidth>
l&&(h=l-b.offsetWidth)}b.style.top=g+"px";b.style.left=b.style.right="";"right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px");c&&(a=Dc(this,h,g,h+b.offsetWidth,g+b.offsetHeight),null!=a.scrollTop&&Nb(this,a.scrollTop),null!=a.scrollLeft&&nb(this,a.scrollLeft))},triggerOnKeyDown:ha(Me),triggerOnKeyPress:ha(Ne),triggerOnKeyUp:Le,execCommand:function(a){if(Kc.hasOwnProperty(a))return Kc[a](this)},
triggerElectric:ha(function(a){je(this,a)}),findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=G(this.doc,a);f<b&&(a=Ld(this.doc,a,e,c,d),!a.hitSide);++f);return a},moveH:ha(function(a,b){var c=this;c.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?Ld(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},gc)}),deleteH:ha(function(a,b){var c=this.doc;this.doc.sel.somethingSelected()?c.replaceSelection("",null,"+delete"):xb(this,function(d){var e=
Ld(c,d.head,a,b,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=G(this.doc,a);f<b&&(a=La(this,a,"div"),null==d?d=a.left:a.left=d,a=ff(this,a,e,c),!a.hitSide);++f);return a},moveV:ha(function(a,b){var c=this,d=this.doc,e=[],f=!c.display.shift&&!d.extend&&d.sel.somethingSelected();d.extendSelectionsBy(function(h){if(f)return 0>a?h.from():h.to();var k=La(c,h.head,"div");null!=h.goalColumn&&(k.left=h.goalColumn);e.push(k.left);
var l=ff(c,k,a,b);"page"==b&&h==d.sel.primary()&&Nc(c,null,yc(c,l,"div").top-k.top);return l},gc);if(e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),findWordAt:function(a){var b=z(this.doc,a.line).text,c=a.ch,d=a.ch;if(b){var e=this.getHelper(a,"wordChars");(0>a.xRel||d==b.length)&&c?--c:++d;var f=b.charAt(c);for(f=Qc(f,e)?function(g){return Qc(g,e)}:/\s/.test(f)?function(g){return/\s/.test(g)}:function(g){return!/\s/.test(g)&&!Qc(g)};0<c&&f(b.charAt(c-1));)--c;for(;d<
b.length&&f(b.charAt(d));)++d}return new T(t(a.line,c),t(a.line,d))},toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?Ob(this.display.cursorDiv,"CodeMirror-overwrite"):Mb(this.display.cursorDiv,"CodeMirror-overwrite"),ca(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==Ea()},scrollTo:ha(function(a,b){null==a&&null==b||Oc(this);null!=a&&(this.curOp.scrollLeft=a);null!=b&&(this.curOp.scrollTop=
b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-Ca(this)-this.display.barHeight,width:a.scrollWidth-Ca(this)-this.display.barWidth,clientHeight:gd(this),clientWidth:Qa(this)}},scrollIntoView:ha(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:t(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);a.margin=b||0;null!=a.from.line?
(Oc(this),this.curOp.scrollToPos=a):(a=Dc(this,Math.min(a.from.left,a.to.left),Math.min(a.from.top,a.to.top)-a.margin,Math.max(a.from.right,a.to.right),Math.max(a.from.bottom,a.to.bottom)+a.margin),this.scrollTo(a.scrollLeft,a.scrollTop))}),setSize:ha(function(a,b){function c(f){return"number"==typeof f||/^\d+$/.test(String(f))?f+"px":f}var d=this;null!=a&&(d.display.wrapper.style.width=c(a));null!=b&&(d.display.wrapper.style.height=c(b));d.options.lineWrapping&&De(this);var e=d.display.viewFrom;
d.doc.iter(e,d.display.viewTo,function(f){if(f.widgets)for(var g=0;g<f.widgets.length;g++)if(f.widgets[g].noHScroll){Ma(d,e,"widget");break}++e});d.curOp.forceUpdate=!0;ca(d,"refresh",this)}),operation:function(a){return qa(this,a)},refresh:ha(function(){var a=this.display.cachedTextHeight;oa(this);this.curOp.forceUpdate=!0;Jb(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);Kb(this);(null==a||.5<Math.abs(a-Wa(this.display)))&&K(this);ca(this,"refresh",this)}),swapDoc:ha(function(a){var b=
this.doc;b.cm=null;Vd(this,a);Jb(this);this.display.input.reset();this.scrollTo(a.scrollLeft,a.scrollTop);this.curOp.forceScroll=!0;ka(this,"swapDoc",this,b);return b}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};Ab(q);var Hf=q.defaults={},jb=q.optionHandlers={},Wd=q.Init={toString:function(){return"CodeMirror.Init"}};
E("value","",function(a,b){a.setValue(b)},!0);E("mode",null,function(a,b){a.doc.modeOption=b;B(a)},!0);E("indentUnit",2,B,!0);E("indentWithTabs",!1);E("smartIndent",!0);E("tabSize",4,function(a){O(a);Jb(a);oa(a)},!0);E("lineSeparator",null,function(a,b){if(a.doc.lineSep=b){var c=[],d=a.doc.first;a.doc.iter(function(f){for(var g=0;;){var h=f.text.indexOf(b,g);if(-1==h)break;g=h+b.length;c.push(t(d,h))}d++});for(var e=c.length-1;0<=e;e--)wb(a.doc,b,c[e],t(c[e].line,c[e].ch+b.length))}});E("specialChars",
/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b,c){a.state.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");c!=q.Init&&a.refresh()});E("specialCharPlaceholder",function(a){var b=y("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);b.setAttribute("aria-label",b.title);return b},function(a){a.refresh()},!0);E("electricChars",!0);E("inputStyle",Db?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor");
},!0);E("rtlMoveVisually",!Cg);E("wholeLineUpdateBefore",!0);E("theme","default",function(a){F(a);Y(a)},!0);E("keyMap","default",function(a,b,c){b=Rc(b);(c=c!=q.Init&&Rc(c))&&c.detach&&c.detach(a,b);b.attach&&b.attach(a,c||null)});E("extraKeys",null);E("lineWrapping",!1,function(a){a.options.lineWrapping?(Ob(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(Mb(a.display.wrapper,"CodeMirror-wrap"),mb(a));K(a);oa(a);Jb(a);setTimeout(function(){M(a)},
100)},!0);E("gutters",[],function(a){fa(a.options);Y(a)},!0);E("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?bd(a.display)+"px":"0";a.refresh()},!0);E("coverGutterNextToScrollbar",!1,function(a){M(a)},!0);E("scrollbarStyle","native",function(a){H(a);M(a);a.display.scrollbars.setScrollTop(a.doc.scrollTop);a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0);E("lineNumbers",!1,function(a){fa(a.options);Y(a)},!0);E("firstLineNumber",1,Y,!0);E("lineNumberFormatter",function(a){return a},
Y,!0);E("showCursorWhenSelecting",!1,Pb,!0);E("resetSelectionOnContextMenu",!0);E("lineWiseCopyCut",!0);E("readOnly",!1,function(a,b){"nocursor"==b?(Gb(a),a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||a.display.input.reset())});E("disableInput",!1,function(a,b){b||a.display.input.reset()},!0);E("dragDrop",!0,function(a,b,c){!b!=!(c&&c!=q.Init)&&(c=a.display.dragFunctions,b=b?A:Ja,b(a.display.scroller,"dragstart",c.start),b(a.display.scroller,"dragenter",c.simple),b(a.display.scroller,
"dragover",c.simple),b(a.display.scroller,"drop",c.drop))});E("cursorBlinkRate",530);E("cursorScrollMargin",0);E("cursorHeight",1,Pb,!0);E("singleCursorHeightPerLine",!0,Pb,!0);E("workTime",100);E("workDelay",100);E("flattenSpans",!0,O,!0);E("addModeClass",!1,O,!0);E("pollInterval",100);E("undoDepth",200,function(a,b){a.doc.history.undoDepth=b});E("historyEventDelay",1250);E("viewportMargin",10,function(a){a.refresh()},!0);E("maxHighlightLength",1E4,O,!0);E("moveInputWithCursor",!0,function(a,b){b||
a.display.input.resetPosition()});E("tabindex",null,function(a,b){a.display.input.getField().tabIndex=b||""});E("autofocus",null);var Gf=q.modes={},hc=q.mimeModes={};q.defineMode=function(a,b){q.defaults.mode||"null"==a||(q.defaults.mode=a);2<arguments.length&&(b.dependencies=Array.prototype.slice.call(arguments,2));Gf[a]=b};q.defineMIME=function(a,b){hc[a]=b};q.resolveMode=function(a){if("string"==typeof a&&hc.hasOwnProperty(a))a=hc[a];else if(a&&"string"==typeof a.name&&hc.hasOwnProperty(a.name)){var b=
hc[a.name];"string"==typeof b&&(b={name:b});a=xf(b,a);a.name=b.name}else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return q.resolveMode("application/xml");return"string"==typeof a?{name:a}:a||{name:"null"}};q.getMode=function(a,b){b=q.resolveMode(b);var c=Gf[b.name];if(!c)return q.getMode(a,"text/plain");a=c(a,b);if(ic.hasOwnProperty(b.name)){c=ic[b.name];for(var d in c)c.hasOwnProperty(d)&&(a.hasOwnProperty(d)&&(a["_"+d]=a[d]),a[d]=c[d])}a.name=b.name;b.helperType&&(a.helperType=b.helperType);
if(b.modeProps)for(d in b.modeProps)a[d]=b.modeProps[d];return a};q.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});q.defineMIME("text/plain","null");var ic=q.modeExtensions={};q.extendMode=function(a,b){a=ic.hasOwnProperty(a)?ic[a]:ic[a]={};va(b,a)};q.defineExtension=function(a,b){q.prototype[a]=b};q.defineDocExtension=function(a,b){na.prototype[a]=b};q.defineOption=E;var Zc=[];q.defineInitHook=function(a){Zc.push(a)};var Cb=q.helpers={};q.registerHelper=function(a,b,c){Cb.hasOwnProperty(a)||
(Cb[a]=q[a]={_global:[]});Cb[a][b]=c};q.registerGlobalHelper=function(a,b,c,d){q.registerHelper(a,b,d);Cb[a]._global.push({pred:c,val:d})};var sb=q.copyState=function(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);a={};for(var c in b){var d=b[c];d instanceof Array&&(d=d.concat([]));a[c]=d}return a},Tf=q.startState=function(a,b,c){return a.startState?a.startState(b,c):!0};q.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||
{mode:a,state:b}};var Kc=q.commands={selectAll:function(a){a.setSelection(t(a.firstLine(),0),t(a.lastLine()),Ga)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),Ga)},killLine:function(a){xb(a,function(b){if(b.empty()){var c=z(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:t(b.head.line+1,0)}:{from:b.head,to:t(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){xb(a,function(b){return{from:t(b.from().line,
0),to:G(a.doc,t(b.to().line+1,0))}})},delLineLeft:function(a){xb(a,function(b){return{from:t(b.from().line,0),to:b.from()}})},delWrappedLineLeft:function(a){xb(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){xb(a,function(b){var c=a.charCoords(b.head,"div").top+5;c=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:c}})},undo:function(a){a.undo()},redo:function(a){a.redo()},
undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(t(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(t(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return Bf(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){a.extendSelectionsBy(function(b){return Cf(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){a.extendSelectionsBy(function(b){b=b.head.line;for(var c,
d=z(a.doc,b);c=Za(d,!1);)d=c.find(1,!0).line,b=null;c=(c=xa(d))?c[0].level%2?Bc(d):Cc(d):d.text.length;return t(null==b?S(d):b,c)},{origin:"+move",bias:-1})},goLineRight:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div")},gc)},goLineLeft:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},gc)},goLineLeftSmart:function(a){a.extendSelectionsBy(function(b){var c=
a.charCoords(b.head,"div").top+5;c=a.coordsChar({left:0,top:c},"div");return c.ch<a.getLine(c.line).search(/\S/)?Cf(a,b.head):c},gc)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,
"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},
indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from();f=za(a.getLine(f.line),f.ch,d);b.push(Array(d-f%d+1).join(" "))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){qa(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){var e=
b[d].head,f=z(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new t(e.line,e.ch-1)),0<e.ch)e=new t(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),t(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=z(a.doc,e.line-1).text;g&&a.replaceRange(f.charAt(0)+a.doc.lineSeparator()+g.charAt(g.length-1),t(e.line-1,g.length-1),t(e.line,1),"+transpose")}c.push(new T(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){qa(a,function(){for(var b=a.listSelections().length,c=0;c<
b;c++){var d=a.listSelections()[c];a.replaceRange(a.doc.lineSeparator(),d.anchor,d.head,"+input");a.indentLine(d.from().line+1,null,!0);pb(a)}})},toggleOverwrite:function(a){a.toggleOverwrite()}},Ta=q.keyMap={};Ta.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",
Insert:"toggleOverwrite",Esc:"singleSelection"};Ta.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace",
"Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};Ta.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore",
"Ctrl-K":"killLine","Ctrl-T":"transposeChars"};Ta.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev",
"Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};Ta["default"]=wa?Ta.macDefault:Ta.pcDefault;q.normalizeKeyMap=function(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!/^(name|fallthrough|(de|at)tach)$/.test(c)){if("..."!=d)for(var e=rc(c.split(" "),
lg),f=0;f<e.length;f++){if(f==e.length-1){var g=e.join(" ");var h=d}else g=e.slice(0,f+1).join(" "),h="...";var k=b[g];if(!k)b[g]=h;else if(k!=h)throw Error("Inconsistent bindings for "+g);}delete a[c]}}for(var l in b)a[l]=b[l];return a};var Yb=q.lookupKey=function(a,b,c,d){b=Rc(b);var e=b.call?b.call(a,d):b[a];if(!1===e)return"nothing";if("..."===e)return"multi";if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return Yb(a,b.fallthrough,
c,d);for(e=0;e<b.fallthrough.length;e++){var f=Yb(a,b.fallthrough[e],c,d);if(f)return f}}},eg=q.isModifierKey=function(a){a="string"==typeof a?a:Ua[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a},gg=q.keyName=function(a,b){if(Aa&&34==a.keyCode&&a["char"])return!1;var c=Ua[a.keyCode],d=c;if(null==d||a.altGraphKey)return!1;a.altKey&&"Alt"!=c&&(d="Alt-"+d);(Ff?a.metaKey:a.ctrlKey)&&"Ctrl"!=c&&(d="Ctrl-"+d);(Ff?a.ctrlKey:a.metaKey)&&"Cmd"!=c&&(d="Cmd-"+d);!b&&a.shiftKey&&"Shift"!=c&&(d="Shift-"+
d);return d};q.fromTextArea=function(a,b){function c(){a.value=h.getValue()}b=b?va(b):{};b.value=a.value;!b.tabindex&&a.tabIndex&&(b.tabindex=a.tabIndex);!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder);if(null==b.autofocus){var d=Ea();b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}if(a.form&&(A(a.form,"submit",c),!b.leaveSubmitMethodAlone)){var e=a.form,f=e.submit;try{var g=e.submit=function(){c();e.submit=f;e.submit();e.submit=g}}catch(k){}}b.finishInit=function(k){k.save=
c;k.getTextArea=function(){return a};k.toTextArea=function(){k.toTextArea=isNaN;c();a.parentNode.removeChild(k.getWrapperElement());a.style.display="";a.form&&(Ja(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=f))}};a.style.display="none";var h=q(function(k){a.parentNode.insertBefore(k,a.nextSibling)},b);return h};var Vc=q.StringStream=function(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0};Vc.prototype={eol:function(){return this.pos>=
this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;
return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<this.start&&(this.lastColumnValue=za(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?za(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return za(this.string,
null,this.tabSize)-(this.lineStart?za(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"==typeof a){var d=function(f){return c?f.toLowerCase():f},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=
a}}};var Md=0,gb=q.TextMarker=function(a,b){this.lines=[];this.type=b;this.doc=a;this.id=++Md};Ab(gb);gb.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&ib(a);if(ta(this,"clear")){var c=this.find();c&&ka(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var f=this.lines[e],g=$b(f.markedSpans,this);a&&!this.collapsed?Ma(a,S(f),"text"):a&&(null!=g.to&&(d=S(f)),null!=g.from&&(c=S(f)));for(var h=f,k=void 0,l=f.markedSpans,m=g,p=0;p<l.length;++p)l[p]!=
m&&(k||(k=[])).push(l[p]);h.markedSpans=k;null==g.from&&this.collapsed&&!Xa(this.doc,f)&&a&&Ba(f,Wa(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)f=Ha(this.lines[e]),g=lb(f),g>a.display.maxLineLength&&(a.display.maxLine=f,a.display.maxLineLength=g,a.display.maxLineChanged=!0);null!=c&&a&&this.collapsed&&oa(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&xe(a.doc));a&&ka(a,"markerCleared",a,
this);b&&kb(a);this.parent&&this.parent.clear()}};gb.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=$b(f.markedSpans,this);if(null!=g.from&&(c=t(b?f:S(f),g.from),-1==a))return c;if(null!=g.to&&(d=t(b?f:S(f),g.to),1==a))return d}return c&&{from:c,to:d}};gb.prototype.changed=function(){var a=this.find(-1,!0),b=this,c=this.doc.cm;a&&c&&qa(c,function(){var d=a.line,e=S(a.line);if(e=nd(c,e))Ce(e),c.curOp.selectionChanged=
c.curOp.forceUpdate=!0;c.curOp.updateMaxLine=!0;Xa(b.doc,d)||null==b.height||(e=b.height,b.height=null,(e=Wb(b)-e)&&Ba(d,d.height+e))})};gb.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=ja(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};gb.prototype.detachLine=function(a){this.lines.splice(ja(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,
(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};Md=0;var Tc=q.SharedTextMarker=function(a,b){this.markers=a;this.primary=b;for(b=0;b<a.length;++b)a[b].parent=this};Ab(Tc);Tc.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();ka(this,"clear")}};Tc.prototype.find=function(a,b){return this.primary.find(a,b)};var Uc=q.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);
this.doc=a;this.node=b};Ab(Uc);Uc.prototype.clear=function(){var a=this.doc.cm,b=this.line.widgets,c=this.line,d=S(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=Wb(this);Ba(c,Math.max(0,c.height-f));a&&qa(a,function(){var g=-f;Da(c)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&Nc(a,null,g);Ma(a,d,"widget")})}};Uc.prototype.changed=function(){var a=this.height,b=this.doc.cm,c=this.line;this.height=null;var d=Wb(this)-a;d&&(Ba(c,c.height+
d),b&&qa(b,function(){b.curOp.forceUpdate=!0;Da(c)<(b.curOp&&b.curOp.scrollTop||b.doc.scrollTop)&&Nc(b,null,d)}))};var ac=q.Line=function(a,b,c){this.text=a;lf(this,b);this.height=c?c(this):1};Ab(ac);ac.prototype.lineNo=function(){return S(this)};var rg={},qg={};bc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;kf(f);ka(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,
this.lines)},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};cc.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;e==f&&(this.children.splice(c--,
1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(1<this.children.length||!(this.children[0]instanceof bc))&&(a=[],this.collapse(a),this.children=[new bc(a)],this.children[0].parent=this)},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<=f){e.insertInner(a,b,c);if(e.lines&&50<e.lines.length){for(;50<
e.lines.length;)a=e.lines.splice(e.lines.length-25,25),a=new bc(a),e.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5);b=new cc(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=ja(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new cc(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);
a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){f=Math.min(b,f-a);if(e.iterN(a,f,c))return!0;if(0==(b-=f))break;a=0}else a-=f}}};var Eg=0,na=q.Doc=function(a,b,c,d){if(!(this instanceof na))return new na(a,b,c,d);null==c&&(c=0);cc.call(this,[new bc([new ac("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.frontier=c;c=t(c,0);this.sel=Fa(c);this.history=new Wc(null);
this.id=++Eg;this.modeOption=b;this.lineSep=d;"string"==typeof a&&(a=this.splitLines(a));Kd(this,{from:c,to:c,text:a});ea(this,Fa(c),Ga)};na.prototype=xf(cc.prototype,{constructor:na,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=Rd(this,this.first,this.first+this.size);
return!1===a?b:b.join(a||this.lineSeparator())},setValue:la(function(a){var b=t(this.first,0),c=this.first+this.size-1;ob(this,{from:b,to:t(c,z(this,c).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0);ea(this,Fa(b))}),replaceRange:function(a,b,c,d){b=G(this,b);c=c?G(this,c):b;wb(this,a,b,c,d)},getRange:function(a,b,c){a=cb(this,G(this,a),G(this,b));return!1===c?a:a.join(c||this.lineSeparator())},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(Sb(this,
a))return z(this,a)},getLineNumber:function(a){return S(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=z(this,a));return Ha(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return G(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},
somethingSelected:function(){return this.sel.somethingSelected()},setCursor:la(function(a,b,c){a=G(this,"number"==typeof a?t(a,b||0):a);ea(this,Fa(a,null),c)}),setSelection:la(function(a,b,c){var d=G(this,a);a=G(this,b||a);ea(this,Fa(d,a),c)}),extendSelection:la(function(a,b,c){uc(this,G(this,a),b&&G(this,b),c)}),extendSelections:la(function(a,b){b=[];for(var c=0;c<a.length;c++)b[c]=G(this,a[c]);re(this,b)}),extendSelectionsBy:la(function(a,b){re(this,rc(this.sel.ranges,a),b)}),setSelections:la(function(a,
b,c){if(a.length){for(var d=0,e=[];d<a.length;d++)e[d]=new T(G(this,a[d].anchor),G(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex));ea(this,ya(e,b),c)}}),addSelection:la(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new T(G(this,a),G(this,b||a)));ea(this,ya(d,d.length-1),c)}),getSelection:function(a){for(var b=this.sel.ranges,c,d=0;d<b.length;d++){var e=cb(this,b[d].from(),b[d].to());c=c?c.concat(e):e}return!1===a?c:c.join(a||this.lineSeparator())},getSelections:function(a){for(var b=
[],c=this.sel.ranges,d=0;d<c.length;d++){var e=cb(this,c[d].from(),c[d].to());!1!==a&&(e=e.join(a||this.lineSeparator()));b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:la(function(a,b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];d[f]={from:g.from(),to:g.to(),text:this.splitLines(a[f]),origin:c}}if(f=b&&"end"!=b){f=[];c=a=t(this.first,0);for(e=0;e<d.length;e++){var h=
d[e];g=Ve(h.from,a,c);var k=Ve(eb(h),a,c);a=h.to;c=k;"around"==b?(h=this.sel.ranges[e],h=0>I(h.head,h.anchor),f[e]=new T(h?k:g,h?g:k)):f[e]=new T(g,g)}f=new Ka(f,this.sel.primIndex)}b=f;for(f=d.length-1;0<=f;f--)ob(this,d[f]);b?se(this,b):this.cm&&pb(this.cm)}),undo:la(function(){Mc(this,"undo")}),redo:la(function(){Mc(this,"redo")}),undoSelection:la(function(){Mc(this,"undo",!0)}),redoSelection:la(function(){Mc(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},
historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new Wc(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(a){return this.history.generation==
(a||this.cleanGeneration)},getHistory:function(){return{done:zb(this.history.done),undone:zb(this.history.undone)}},setHistory:function(a){var b=this.history=new Wc(this.history.maxGeneration);b.done=zb(a.done.slice(0),null,!0);b.undone=zb(a.undone.slice(0),null,!0)},addLineClass:la(function(a,b,c){return Pc(this,a,"gutter"==b?"gutter":"class",function(d){var e="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass";if(d[e]){if(fc(c).test(d[e]))return!1;d[e]+=" "+c}else d[e]=
c;return!0})}),removeLineClass:la(function(a,b,c){return Pc(this,a,"gutter"==b?"gutter":"class",function(d){var e="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass",f=d[e];if(f)if(null==c)d[e]=null;else{var g=f.match(fc(c));if(!g)return!1;var h=g.index+g[0].length;d[e]=f.slice(0,g.index)+(g.index&&h!=f.length?" ":"")+f.slice(h)||null}else return!1;return!0})}),addLineWidget:la(function(a,b,c){return pg(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(a,
b,c){return yb(this,G(this,a),G(this,b),c,"range")},setBookmark:function(a,b){b={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};a=G(this,a);return yb(this,a,a,b,"bookmark")},findMarksAt:function(a){a=G(this,a);var b=[],c=z(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,
b,c){a=G(this,a);b=G(this,b);var d=[],e=a.line;this.iter(a.line,b.line+1,function(f){if(f=f.markedSpans)for(var g=0;g<f.length;g++){var h=f[g];e==a.line&&a.ch>h.to||null==h.from&&e!=a.line||e==b.line&&h.from>b.ch||c&&!c(h.marker)||d.push(h.marker.parent||h.marker)}++e});return d},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first;this.iter(function(d){d=d.text.length+
1;if(d>a)return b=a,!0;a-=d;++c});return G(this,t(c,b))},indexFromPos:function(a){a=G(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;this.iter(this.first,a.line,function(c){b+=c.text.length+1});return b},copy:function(a){var b=new na(Rd(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel=this.sel;b.extend=!1;a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||
(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new na(Rd(this,b,c),a.mode||this.modeOption,b,this.lineSep);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=hf(this);for(c=0;c<a.length;c++){var d=a[c],e=d.find(),f=b.clipPos(e.from);e=b.clipPos(e.to);I(f,e)&&(f=yb(b,f,e,d.primary,d.primary.type),d.markers.push(f),f.parent=
d)}return b},unlinkDoc:function(a){a instanceof q&&(a=a.doc);if(this.linked)for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==a){this.linked.splice(b,1);a.unlinkDoc(this);ng(hf(this));break}if(a.history==this.history){var c=[a.id];fb(a,function(d){c.push(d.id)},!0);a.history=new Wc(null);a.history.done=zb(this.history.done,c);a.history.undone=zb(this.history.undone,c)}},iterLinkedDocs:function(a){fb(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?
a.split(this.lineSep):Fg(a)},lineSeparator:function(){return this.lineSep||"\n"}});na.prototype.eachLine=na.prototype.iter;var Gg="iter insert remove copy getEditor constructor".split(" "),jc;for(jc in na.prototype)na.prototype.hasOwnProperty(jc)&&0>ja(Gg,jc)&&(q.prototype[jc]=function(a){return function(){return a.apply(this.doc,arguments)}}(na.prototype[jc]));Ab(na);var ma=q.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},Hg=q.e_stopPropagation=function(a){a.stopPropagation?
a.stopPropagation():a.cancelBubble=!0},Cd=q.e_stop=function(a){ma(a);Hg(a)},A=q.on=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))},Ja=q.off=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}},ca=q.signal=function(a,b){var c=a._handlers&&
a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)},dc=null,Yd=30,Re=q.Pass={toString:function(){return"CodeMirror.Pass"}},Ga={scroll:!1},Ed={origin:"*mouse"},gc={origin:"+move"};Eb.prototype.set=function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var za=q.countColumn=function(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;;){var f=a.indexOf("\t",d);if(0>f||f>=b)return e+(b-d);e+=f-d;e+=c-e%c;
d=f+1}},Xc=[""],Bb=function(a){a.select()};qb?Bb=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:P&&(Bb=function(a){try{a.select()}catch(b){}});var Ig=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,yf=q.isWordChar=function(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||Ig.test(a))},yg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
var tb=document.createRange?function(a,b,c,d){var e=document.createRange();e.setEnd(d||a,c);e.setStart(a,b);return e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(e){return d}d.collapse(!0);d.moveEnd("character",c);d.moveStart("character",b);return d};var od=q.contains=function(a,b){3==b.nodeType&&(b=b.parentNode);if(a.contains)return a.contains(b);do if(11==b.nodeType&&(b=b.host),b==a)return!0;while(b=b.parentNode)};P&&11>U&&(Ea=function(){try{return document.activeElement}catch(a){return document.body}});
var Mb=q.rmClass=function(a,b){var c=a.className;if(b=fc(b).exec(c)){var d=c.slice(b.index+b[0].length);a.className=c.slice(0,b.index)+(d?b[1]+d:"")}},Ob=q.addClass=function(a,b){var c=a.className;fc(b).test(c)||(a.className+=(c?" ":"")+b)},Ud=!1,ag=function(){if(P&&9>U)return!1;var a=y("div");return"draggable"in a||"dragDrop"in a}(),Sd,Pd,Fg=q.splitLines=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==
a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},Dg=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Te=function(){var a=y("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),
ud=null,Ua={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",
63276:"PageUp",63277:"PageDown",63302:"Insert"};q.keyNames=Ua;(function(){for(var a=0;10>a;a++)Ua[a+48]=Ua[a+96]=String(a);for(a=65;90>=a;a++)Ua[a]=String.fromCharCode(a);for(a=1;12>=a;a++)Ua[a+111]=Ua[a+63235]="F"+a})();var Xb,wg=function(){function a(h){return 247>=h?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(h):
1424<=h&&1524>=h?"R":1536<=h&&1773>=h?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm".charAt(h-1536):1774<=h&&2220>=h?"r":8192<=h&&8203>=h?"w":8204==h?"b":"L"}function b(h,k,l){this.level=h;this.from=k;this.to=l}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,d=/[stwN]/,e=/[LRr]/,f=/[Lb1n]/,g=/[1n]/;return function(h){if(!c.test(h))return!1;
for(var k=h.length,l=[],m=0,p;m<k;++m)l.push(a(h.charCodeAt(m)));m=0;for(var n="L";m<k;++m)p=l[m],"m"==p?l[m]=n:n=p;m=0;for(n="L";m<k;++m)p=l[m],"1"==p&&"r"==n?l[m]="n":e.test(p)&&(n=p,"r"==p&&(l[m]="R"));m=1;for(n=l[0];m<k-1;++m)p=l[m],"+"==p&&"1"==n&&"1"==l[m+1]?l[m]="1":","!=p||n!=l[m+1]||"1"!=n&&"n"!=n||(l[m]=n),n=p;for(m=0;m<k;++m)if(p=l[m],","==p)l[m]="N";else if("%"==p){for(n=m+1;n<k&&"%"==l[n];++n);var r=m&&"!"==l[m-1]||n<k&&"1"==l[n]?"1":"N";for(p=m;p<n;++p)l[p]=r;m=n-1}m=0;for(n="L";m<k;++m)p=
l[m],"L"==n&&"1"==p?l[m]="L":e.test(p)&&(n=p);for(m=0;m<k;++m)if(d.test(l[m])){for(n=m+1;n<k&&d.test(l[n]);++n);p="L"==(n<k?l[n]:"L");r="L"==(m?l[m-1]:"L")||p?"L":"R";for(p=m;p<n;++p)l[p]=r;m=n-1}n=[];var v;for(m=0;m<k;)if(f.test(l[m])){p=m;for(++m;m<k&&f.test(l[m]);++m);n.push(new b(0,p,m))}else{var x=m;r=n.length;for(++m;m<k&&"L"!=l[m];++m);for(p=x;p<m;)if(g.test(l[p])){x<p&&n.splice(r,0,new b(1,x,p));x=p;for(++p;p<m&&g.test(l[p]);++p);n.splice(r,0,new b(2,x,p));x=p}else++p;x<m&&n.splice(r,0,new b(1,
x,m))}1==n[0].level&&(v=h.match(/^\s+/))&&(n[0].from=v[0].length,n.unshift(new b(0,0,v[0].length)));1==R(n).level&&(v=h.match(/\s+$/))&&(R(n).to-=v[0].length,n.push(new b(0,k-v[0].length,k)));2==n[0].level&&n.unshift(new b(1,n[0].to,n[0].to));n[0].level!=R(n).level&&n.push(new b(n[0].level,k,k));return n}}();q.version="5.5.0";return q});
(function(q){"object"==typeof exports&&"object"==typeof module?q(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],q):q(CodeMirror)})(function(q){q.defineMode("sql",function(J,B){function O(w,H){var M=w.next();if(Pa[M]){var pa=Pa[M](w,H);if(!1!==pa)return pa}if(1==fa.hexNumber&&("0"==M&&w.match(/^[xX][0-9a-fA-F]+/)||("x"==M||"X"==M)&&w.match(/^'[0-9a-fA-F]+'/))||1==fa.binaryNumber&&(("b"==M||"B"==M)&&w.match(/^'[01]+'/)||"0"==M&&w.match(/^b[01]+/)))return"number";
if(47<M.charCodeAt(0)&&58>M.charCodeAt(0))return w.match(/^[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/),1==fa.decimallessFloat&&w.eat("."),"number";if("?"==M&&(w.eatSpace()||w.eol()||w.eat(";")))return"variable-3";if("'"==M||'"'==M&&fa.doubleQuote)return H.tokenize=u(M),H.tokenize(w,H);if(!(1==fa.nCharCast&&("n"==M||"N"==M)||1==fa.charsetCast&&"_"==M&&w.match(/[a-z][a-z0-9]*/i))||"'"!=w.peek()&&'"'!=w.peek()){if(/^[\(\),;\[\]]/.test(M))return null;if(fa.commentSlashSlash&&"/"==M&&w.eat("/")||fa.commentHash&&
"#"==M||"-"==M&&w.eat("-")&&(!fa.commentSpaceRequired||w.eat(" ")))return w.skipToEnd(),"comment";if("/"==M&&w.eat("*"))return H.tokenize=K,H.tokenize(w,H);if("."==M){if(1==fa.zerolessFloat&&w.match(/^(?:\d+(?:e[+-]?\d+)?)/i))return"number";if(1==fa.ODBCdotTable&&w.match(/^[a-zA-Z_]+/))return"variable-2"}else{if(mb.test(M))return w.eatWhile(mb),null;if("{"==M&&(w.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||w.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/)))return"number";w.eatWhile(/^[_\w\d]/);H=
w.current().toLowerCase();return Lb.hasOwnProperty(H)&&(w.match(/^( )+'[^']*'/)||w.match(/^( )+"[^"]*"/))?"number":ia.hasOwnProperty(H)?"atom":Kb.hasOwnProperty(H)?"builtin":lb.hasOwnProperty(H)?"keyword":Y.hasOwnProperty(H)?"string-2":null}}else return"keyword"}function u(w){return function(H,M){for(var pa=!1,$a;null!=($a=H.next());){if($a==w&&!pa){M.tokenize=O;break}pa=!pa&&"\\"==$a}return"string"}}function K(w,H){for(;;)if(w.skipTo("*")){if(w.next(),w.eat("/")){H.tokenize=O;break}}else{w.skipToEnd();
break}return"comment"}function F(w,H,M){H.context={prev:H.context,indent:w.indentation(),col:w.column(),type:M}}var Y=B.client||{},ia=B.atoms||{"false":!0,"true":!0,"null":!0},Kb=B.builtin||{},lb=B.keywords||{},mb=B.operatorChars||/^[*+\-%<>!=&|~^]/,fa=B.support||{},Pa=B.hooks||{},Lb=B.dateSQL||{date:!0,time:!0,timestamp:!0};return{startState:function(){return{tokenize:O,context:null}},token:function(w,H){w.sol()&&H.context&&null==H.context.align&&(H.context.align=!1);if(w.eatSpace())return null;
var M=H.tokenize(w,H);if("comment"==M)return M;H.context&&null==H.context.align&&(H.context.align=!0);var pa=w.current();"("==pa?F(w,H,")"):"["==pa?F(w,H,"]"):H.context&&H.context.type==pa&&(H.indent=H.context.indent,H.context=H.context.prev);return M},indent:function(w,H){w=w.context;if(!w)return q.Pass;H=H.charAt(0)==w.type;return w.align?w.col+(H?0:1):w.indent+(H?0:J.indentUnit)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:fa.commentSlashSlash?"//":fa.commentHash?"#":null}});(function(){function J(K){for(var F;null!=
(F=K.next());)if("`"==F&&!K.eat("`"))return"variable-2";K.backUp(K.current().length-1);return K.eatWhile(/\w/)?"variable-2":null}function B(K){K.eat("@")&&(K.match(/^session\./),K.match(/^local\./),K.match(/^global\./));return K.eat("'")?(K.match(/^.*'/),"variable-2"):K.eat('"')?(K.match(/^.*"/),"variable-2"):K.eat("`")?(K.match(/^.*`/),"variable-2"):K.match(/^[0-9a-zA-Z$\._]+/)?"variable-2":null}function O(K){return K.eat("N")?"atom":K.match(/^[a-zA-Z.#!?]/)?"variable-2":null}function u(K){var F=
{};K=K.split(" ");for(var Y=0;Y<K.length;++Y)F[K[Y]]=!0;return F}q.defineMIME("text/x-sql",{name:"sql",keywords:u("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where begin"),builtin:u("bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric"),
atoms:u("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:u("date time timestamp"),support:u("ODBCdotTable doubleQuote binaryNumber hexNumber")});q.defineMIME("text/x-mssql",{name:"sql",client:u("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:u("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered declare"),
builtin:u("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),atoms:u("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:u("date datetimeoffset datetime2 smalldatetime datetime time"),hooks:{"@":B}});q.defineMIME("text/x-mysql",{name:"sql",client:u("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),
keywords:u("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group group_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
builtin:u("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:u("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:u("date time timestamp"),support:u("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),
hooks:{"@":B,"`":J,"\\":O}});q.defineMIME("text/x-mariadb",{name:"sql",client:u("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:u("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
builtin:u("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:u("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:u("date time timestamp"),support:u("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),
hooks:{"@":B,"`":J,"\\":O}});q.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:u("add all allow alter and any apply as asc authorize batch begin by clustering columnfamily compact consistency count create custom delete desc distinct drop each_quorum exists filtering from grant if in index insert into key keyspace keyspaces level limit local_one local_quorum modify nan norecursive nosuperuser not of on one order password permission permissions primary quorum rename revoke schema select set storage superuser table three to token truncate ttl two type unlogged update use user users using values where with writetime"),
builtin:u("ascii bigint blob boolean counter decimal double float frozen inet int list map static text timestamp timeuuid tuple uuid varchar varint"),atoms:u("false true infinity NaN"),operatorChars:/^[<>=]/,dateSQL:{},support:u("commentSlashSlash decimallessFloat"),hooks:{}});q.defineMIME("text/x-plsql",{name:"sql",client:u("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),
keywords:u("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),
builtin:u("abs acos add_months ascii asin atan atan2 average bfile bfilename bigserial bit blob ceil character chartorowid chr clob concat convert cos cosh count dec decode deref dual dump dup_val_on_index empty error exp false float floor found glb greatest hextoraw initcap instr instrb int integer isopen last_day least lenght lenghtb ln lower lpad ltrim lub make_ref max min mlslabel mod months_between natural naturaln nchar nclob new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null number numeric nvarchar2 nvl others power rawtohex real reftohex round rowcount rowidtochar rowtype rpad rtrim serial sign signtype sin sinh smallint soundex sqlcode sqlerrm sqrt stddev string substr substrb sum sysdate tan tanh to_char text to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid unlogged upper user userenv varchar varchar2 variance varying vsize xml"),
operatorChars:/^[*+\-%<>!=~]/,dateSQL:u("date time timestamp"),support:u("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")});q.defineMIME("text/x-hive",{name:"sql",keywords:u("select alter $elem$ $key$ $value$ add after all analyze and archive as asc before between binary both bucket buckets by cascade case cast change cluster clustered clusterstatus collection column columns comment compute concatenate continue create cross cursor data database databases dbproperties deferred delete delimited desc describe directory disable distinct distribute drop else enable end escaped exclusive exists explain export extended external false fetch fields fileformat first format formatted from full function functions grant group having hold_ddltime idxproperties if import in index indexes inpath inputdriver inputformat insert intersect into is items join keys lateral left like limit lines load local location lock locks mapjoin materialized minus msck no_drop nocompress not of offline on option or order out outer outputdriver outputformat overwrite partition partitioned partitions percent plus preserve procedure purge range rcfile read readonly reads rebuild recordreader recordwriter recover reduce regexp rename repair replace restrict revoke right rlike row schema schemas semi sequencefile serde serdeproperties set shared show show_database sort sorted ssl statistics stored streamtable table tables tablesample tblproperties temporary terminated textfile then tmp to touch transform trigger true unarchive undo union uniquejoin unlock update use using utc utc_tmestamp view when where while with"),
builtin:u("bool boolean long timestamp tinyint smallint bigint int float double date datetime unsigned string array struct map uniontype"),atoms:u("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:u("date timestamp"),support:u("ODBCdotTable doubleQuote binaryNumber hexNumber")})})()});
(function(q){"object"==typeof exports&&"object"==typeof module?q(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],q):q(CodeMirror)})(function(q){function J(F){F.state.placeholder&&(F.state.placeholder.parentNode.removeChild(F.state.placeholder),F.state.placeholder=null)}function B(F){J(F);var Y=F.state.placeholder=document.createElement("pre");Y.style.cssText="height: 0; overflow: visible";Y.className="CodeMirror-placeholder";Y.appendChild(document.createTextNode(F.getOption("placeholder")));
F.display.lineSpace.insertBefore(Y,F.display.lineSpace.firstChild)}function O(F){K(F)&&B(F)}function u(F){var Y=F.getWrapperElement(),ia=K(F);Y.className=Y.className.replace(" CodeMirror-empty","")+(ia?" CodeMirror-empty":"");ia?B(F):J(F)}function K(F){return 1===F.lineCount()&&""===F.getLine(0)}q.defineOption("placeholder","",function(F,Y,ia){ia=ia&&ia!=q.Init;Y&&!ia?(F.on("blur",O),F.on("change",u),u(F)):!Y&&ia&&(F.off("blur",O),F.off("change",u),J(F),ia=F.getWrapperElement(),ia.className=ia.className.replace(" CodeMirror-empty",
""));Y&&!F.hasFocus()&&O(F)})});
